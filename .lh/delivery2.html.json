{
    "sourceFile": "delivery2.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 22,
            "patches": [
                {
                    "date": 1758446662879,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1758446679523,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n <!DOCTYPE html>\r\n <html lang=\"th\">\r\n <head>\r\n <meta charset=\"UTF-8\">\r\n-<title>ใบเสนอราคา</title>\r\n+<title>ใบ</title>\r\n \r\n <!-- Site Icons -->\r\n <link rel=\"shortcut icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n <link rel=\"icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n"
                },
                {
                    "date": 1758447129043,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n <!DOCTYPE html>\r\n <html lang=\"th\">\r\n <head>\r\n <meta charset=\"UTF-8\">\r\n-<title>ใบ</title>\r\n+<title>ใบส่งของ</title>\r\n \r\n <!-- Site Icons -->\r\n <link rel=\"shortcut icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n <link rel=\"icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n@@ -31,22 +31,23 @@\n     <!-- ฟอร์ม -->\r\n     <form action=\"http://localhost/shop/ยังไม่มี.php\" method=\"post\" id=\"receiptForm\">\r\n \r\n         <div class=\"doc-title\">\r\n-            <h2>ใบเสนอราคา (QUATATION)</h2>\r\n+            <h2>ใบส่งของ</h2>\r\n             <div class=\"doc-info\">\r\n                 <label>เลขที่ / NO. : <input type=\"text\" name=\"order_no\" required></label>\r\n                 <span><b>วันที่ / Date :</b> ............................................</span>\r\n             </div>\r\n         </div>\r\n \r\n         <div class=\"customer-info\">\r\n-            <label>เรื่อง : <input type=\"text\" name=\"customer_name\" required></label><br>\r\n-            <label>เรียน : <textarea name=\"customer_address\" rows=\"2\" required></textarea></label>\r\n+            <label>ชื่อลูกค้า: <input type=\"text\" name=\"customer_name\" required></label><br>\r\n+            <label>ที่อยู่ลูกค้า: <textarea name=\"customer_address\" rows=\"2\" required></textarea></label>\r\n+            <br>\r\n+            <label>** ใบสั่งซื้อ / สั่งจ้าง เลขที่  * <input type=\"text\" name=\"no_order\" required>*</label>\r\n         </div>\r\n \r\n         <br>\r\n-        <h3>รายละเอียดสินค้า</h3>\r\n         <table id=\"itemsTable\">\r\n             <thead>\r\n                 <tr>\r\n                     <th>ลำดับ</th>\r\n@@ -95,14 +96,32 @@\n         <button type=\"button\" class=\"button btn-print\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n     </form>\r\n \r\n \r\n-    <div class=\"signature\">\r\n-        <br>\r\n-        <p>(..............................................................)<br>( นายเลิศชัย อุดมพันธุ์ )<br>ผู้เสนอราคา</p>\r\n+    <div class=\"signatures-container\">\r\n+    <div class=\"signature left\">\r\n+        <p>\r\n+            (.......................................................)<br>\r\n+            (...............................................)<br>\r\n+            ผู้รับของ<br>\r\n+            วันที่รับของ.................................................\r\n+        </p>\r\n     </div>\r\n+\r\n+    <div class=\"signature right\">\r\n+        <p>\r\n+            (..............................................................)<br>\r\n+            (นายอภิชาติ พิมพะนิตย์)<br>\r\n+            ผู้ส่งของ<br>\r\n+            วันที่ส่งของ.................................................\r\n+        </p>\r\n+    </div>\r\n </div>\r\n \r\n+\r\n+\r\n+</div>\r\n+\r\n <script>\r\n // แปลงตัวเลขเป็นภาษาไทย\r\n function numberToThaiText(number) {\r\n     const txtnum = [\"ศูนย์\",\"หนึ่ง\",\"สอง\",\"สาม\",\"สี่\",\"ห้า\",\"หก\",\"เจ็ด\",\"แปด\",\"เก้า\"];\r\n"
                },
                {
                    "date": 1758447144868,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,9 @@\n \r\n     <div class=\"signature right\">\r\n         <p>\r\n             (..............................................................)<br>\r\n-            (นายอภิชาติ พิมพะนิตย์)<br>\r\n+            ( นายเลิศชัย อุดมพันธุ์)<br>\r\n             ผู้ส่งของ<br>\r\n             วันที่ส่งของ.................................................\r\n         </p>\r\n     </div>\r\n"
                },
                {
                    "date": 1758447237746,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n <!-- Site Icons -->\r\n <link rel=\"shortcut icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n <link rel=\"icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n <link rel=\"apple-touch-icon\" href=\"pic/mylogo.png\" />\r\n-<link href=\"css/bid.css\" rel=\"stylesheet\">\r\n+<link href=\"css/.css\" rel=\"stylesheet\">\r\n \r\n </head>\r\n <body>\r\n <div class=\"container\" id=\"receiptContent\">\r\n"
                },
                {
                    "date": 1758447303145,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n <!-- Site Icons -->\r\n <link rel=\"shortcut icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n <link rel=\"icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n <link rel=\"apple-touch-icon\" href=\"pic/mylogo.png\" />\r\n-<link href=\"css/.css\" rel=\"stylesheet\">\r\n+<link href=\"css/delivery2.css\" rel=\"stylesheet\">\r\n \r\n </head>\r\n <body>\r\n <div class=\"container\" id=\"receiptContent\">\r\n"
                },
                {
                    "date": 1758462137993,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n         <div class=\"customer-info\">\r\n             <label>ชื่อลูกค้า: <input type=\"text\" name=\"customer_name\" required></label><br>\r\n             <label>ที่อยู่ลูกค้า: <textarea name=\"customer_address\" rows=\"2\" required></textarea></label>\r\n             <br>\r\n-            <label>** ใบสั่งซื้อ / สั่งจ้าง เลขที่  * <input type=\"text\" name=\"no_order\" required>*</label>\r\n+            <label>** ใบสั่งซื้อ / สั่งจ้าง เลขที่  <input type=\"text\" name=\"no_order\" required>*</label>\r\n         </div>\r\n \r\n         <br>\r\n         <table id=\"itemsTable\">\r\n"
                },
                {
                    "date": 1758465111587,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,228 @@\n+<!DOCTYPE html>\r\n+<html lang=\"th\">\r\n+<head>\r\n+<meta charset=\"UTF-8\">\r\n+<title>ใบส่งของ</title>\r\n+\r\n+<!-- Site Icons -->\r\n+<link rel=\"shortcut icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n+<link rel=\"icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n+<link rel=\"apple-touch-icon\" href=\"pic/mylogo.png\" />\r\n+<link href=\"css/delivery2.css\" rel=\"stylesheet\">\r\n+\r\n+</head>\r\n+<body>\r\n+<div class=\"container\" id=\"receiptContent\">\r\n+\r\n+    <!-- ส่วนหัว -->\r\n+    <div class=\"header-info\">\r\n+        <div class=\"company\">\r\n+            <h2>ร้านเลิศชัยไอที</h2>\r\n+            <p>222 หมู่ 14 ตำบลดงลิง อำเภอกมลาไสย จังหวัดกาฬสินธุ์ 46130</p>\r\n+            <p>โทร. 082-1053870</p>\r\n+            <p>gลขประจำตัวผู้เสียภาษีอากร  1460300026921</p>\r\n+            <p>ทะเบียนการค้าเลขที่ 4651552000789</p>\r\n+        </div>\r\n+        <div class=\"logo\">\r\n+            <img src=\"./pic/mylogo.png\" alt=\"logo\">\r\n+        </div>\r\n+    </div>\r\n+\r\n+    <!-- ฟอร์ม -->\r\n+    <form action=\"http://localhost/shop/delivery1.php\" method=\"post\" id=\"receiptForm\">\r\n+\r\n+        <div class=\"doc-title\">\r\n+            <h2>ใบส่งของ</h2>\r\n+            <div class=\"doc-info\">\r\n+                <label>เลขที่ / NO. : <input type=\"text\" name=\"delivery_no\" required></label>\r\n+                <span><b>วันที่ / Date :</b> ............................................</span>\r\n+            </div>\r\n+        </div>\r\n+\r\n+        <div class=\"customer-info\">\r\n+            <label>ชื่อลูกค้า: <input type=\"text\" name=\"customer_name\" required></label><br>\r\n+            <label>ที่อยู่ลูกค้า: <textarea name=\"customer_address\" rows=\"2\" required></textarea></label><br>\r\n+            <br>\r\n+            <label>** ใบสั่งซื้อ / สั่งจ้าง เลขที่  <input type=\"text\" name=\"order_no\" required></label>\r\n+        </div>\r\n+\r\n+        <br>\r\n+        <table id=\"itemsTable\">\r\n+            <thead>\r\n+                <tr>\r\n+                    <th>ลำดับ</th>\r\n+                    <th>รายการ</th>\r\n+                    <th>จำนวน</th>\r\n+                    <th>ราคา</th>\r\n+                    <th>หน่วย</th>\r\n+                    <th>ราคารวม</th>\r\n+                    <th>ลบ</th>\r\n+                </tr>\r\n+            </thead>\r\n+            <tbody>\r\n+                <tr>\r\n+                    <td>1</td>\r\n+                    <td><input type=\"text\" name=\"item_name[]\"></td>\r\n+                    <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n+                    <td><input type=\"number\" name=\"price[]\" class=\"price\"> </td>\r\n+                    <td><input type=\"text\" name=\"unit[]\"></td>\r\n+                    <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n+                    <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n+                </tr>\r\n+            </tbody>\r\n+            <tfoot>\r\n+                <!-- รวมเป็นเงินทั้งสิ้น -->\r\n+                 <tr>\r\n+                    <td colspan=\"5\" style=\"text-align:center;font-weight:bold;\">รวมเป็นเงินทั้งสิ้น</td>\r\n+                    <td style=\"text-align:right;font-weight:bold;\">\r\n+                        <span id=\"grandTotalDisplay\">0.00</span>\r\n+                    </td>\r\n+                    <td></td>\r\n+                </tr>\r\n+                <!-- ตัวอักษร -->\r\n+                 <tr>\r\n+                    <td colspan=\"7\" style=\"text-align:left;font-weight:bold;\">\r\n+                        (ตัวอักษร: <span id=\"thaiTextDisplay\">ศูนย์บาทถ้วน</span>)\r\n+                    </td>\r\n+                </tr>\r\n+            </tfoot>\r\n+        </table>\r\n+\r\n+        <input type=\"hidden\" name=\"grand_total\" id=\"grand_total_input\">\r\n+\r\n+        <button type=\"button\" class=\"add-btn\">+</button>\r\n+        <button type=\"button\" class=\"button btn-back\" onclick=\"window.location.href='index.html'\">ย้อนกลับ</button>\r\n+        <button type=\"submit\" class=\"button btn-save\">บันทึกใบเสร็จ</button>\r\n+        <button type=\"button\" class=\"button btn-print\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n+    </form>\r\n+\r\n+\r\n+\r\n+    <div class=\"signatures-container\">\r\n+    <div class=\"signature left\">\r\n+        <p>\r\n+            (.......................................................)<br>\r\n+            (...............................................)<br>\r\n+            ผู้รับของ<br>\r\n+            วันที่รับของ.................................................\r\n+        </p>\r\n+    </div>\r\n+\r\n+    <div class=\"signature right\">\r\n+        <p>\r\n+            (..............................................................)<br>\r\n+            ( นายเลิศชัย อุดมพันธุ์)<br>\r\n+            ผู้ส่งของ<br>\r\n+            วันที่ส่งของ.................................................\r\n+        </p>\r\n+    </div>\r\n+</div>\r\n+\r\n+\r\n+\r\n+</div>\r\n+\r\n+<script>\r\n+// แปลงตัวเลขเป็นภาษาไทย\r\n+function numberToThaiText(number) {\r\n+    const txtnum = [\"ศูนย์\",\"หนึ่ง\",\"สอง\",\"สาม\",\"สี่\",\"ห้า\",\"หก\",\"เจ็ด\",\"แปด\",\"เก้า\"];\r\n+    const txtdigit = [\"\",\"สิบ\",\"ร้อย\",\"พัน\",\"หมื่น\",\"แสน\",\"ล้าน\"];\r\n+    if(number === 0) return \"ศูนย์บาทถ้วน\";\r\n+    let bahtText = \"\";\r\n+    let numStr = number.toFixed(2).toString();\r\n+    let [intPart, decPart] = numStr.split(\".\");\r\n+    let intLen = intPart.length;\r\n+\r\n+    for(let i=0; i<intLen; i++){\r\n+        let n = parseInt(intPart.charAt(i));\r\n+        let pos = intLen - i - 1;\r\n+        if(n!==0){\r\n+            if(pos==1 && n==1) bahtText += \"สิบ\";\r\n+            else if(pos==1 && n==2) bahtText += \"ยี่สิบ\";\r\n+            else if(pos==0 && n==1 && intLen>1) bahtText += \"เอ็ด\";\r\n+            else bahtText += txtnum[n] + (pos>0?txtdigit[pos]:\"\");\r\n+        }\r\n+    }\r\n+    bahtText += \"บาท\";\r\n+    if(decPart==\"00\") bahtText += \"ถ้วน\";\r\n+    else {\r\n+        let d1 = parseInt(decPart.charAt(0));\r\n+        let d2 = parseInt(decPart.charAt(1));\r\n+        if(d1!=0){\r\n+            if(d1==1) bahtText += \"สิบ\";\r\n+            else if(d1==2) bahtText += \"ยี่สิบ\";\r\n+            else bahtText += txtnum[d1]+\"สิบ\";\r\n+        }\r\n+        if(d2!=0){\r\n+            if(d2==1) bahtText += \"เอ็ดสตางค์\";\r\n+            else bahtText += txtnum[d2]+\"สตางค์\";\r\n+        }\r\n+    }\r\n+    return bahtText;\r\n+}\r\n+\r\n+// คำนวณราคารวม\r\n+function calculateTotals() {\r\n+    let qtys = document.querySelectorAll(\".qty\");\r\n+    let prices = document.querySelectorAll(\".price\");\r\n+    let totals = document.querySelectorAll(\".total\");\r\n+    let grandTotal = 0;\r\n+\r\n+    qtys.forEach((qty, i) => {\r\n+        let q = parseFloat(qty.value) || 0;\r\n+        let p = parseFloat(prices[i].value) || 0;\r\n+        let sum = q * p;\r\n+        totals[i].value = sum.toFixed(2);\r\n+        grandTotal += sum;\r\n+    });\r\n+\r\n+    // แสดงผลรวม\r\n+    document.getElementById(\"grandTotalDisplay\").innerText = grandTotal.toFixed(2);\r\n+    document.getElementById(\"grand_total_input\").value = grandTotal.toFixed(2);\r\n+\r\n+    // แสดงตัวอักษร\r\n+    document.getElementById(\"thaiTextDisplay\").innerText = numberToThaiText(grandTotal);\r\n+}\r\n+\r\n+// event คำนวณอัตโนมัติ\r\n+document.addEventListener(\"input\", function(e){\r\n+    if(e.target.classList.contains(\"qty\") || e.target.classList.contains(\"price\")){\r\n+        calculateTotals();\r\n+    }\r\n+});\r\n+\r\n+// เพิ่มแถวสินค้า\r\n+document.querySelector(\".add-btn\").addEventListener(\"click\", function(){\r\n+    let table = document.getElementById(\"itemsTable\").getElementsByTagName(\"tbody\")[0];\r\n+    let rowCount = table.rows.length;\r\n+    let row = table.insertRow();\r\n+    row.innerHTML = `\r\n+        <td>${rowCount+1}</td>\r\n+        <td><input type=\"text\" name=\"item_name[]\"></td>\r\n+        <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n+        <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n+        <td><input type=\"text\" name=\"unit[]\"></td>\r\n+        <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n+        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n+    `;\r\n+});\r\n+\r\n+// ลบแถวสินค้า\r\n+document.getElementById(\"itemsTable\").addEventListener(\"click\", function(e){\r\n+    if(e.target.classList.contains(\"remove-btn\")){\r\n+        let row = e.target.closest(\"tr\");\r\n+        row.parentNode.removeChild(row);\r\n+        calculateTotals();\r\n+        let rows = document.querySelectorAll(\"#itemsTable tbody tr\");\r\n+        rows.forEach((r, i) => r.cells[0].innerText = i+1);\r\n+    }\r\n+});\r\n+\r\n+// ปุ่มพิมพ์ PDF\r\n+function printPDF() {\r\n+  window.print();\r\n+}\r\n+\r\n+</script>\r\n+</body>\r\n+</html>\r\n"
                },
                {
                    "date": 1758465119276,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n         </div>\r\n     </div>\r\n \r\n     <!-- ฟอร์ม -->\r\n-    <form action=\"http://localhost/shop/delivery1.php\" method=\"post\" id=\"receiptForm\">\r\n+    <form action=\"http://localhost/shop/delivery2.php\" method=\"post\" id=\"receiptForm\">\r\n \r\n         <div class=\"doc-title\">\r\n             <h2>ใบส่งของ</h2>\r\n             <div class=\"doc-info\">\r\n@@ -225,231 +225,4 @@\n \r\n </script>\r\n </body>\r\n </html>\r\n-<!DOCTYPE html>\r\n-<html lang=\"th\">\r\n-<head>\r\n-<meta charset=\"UTF-8\">\r\n-<title>ใบส่งของ</title>\r\n-\r\n-<!-- Site Icons -->\r\n-<link rel=\"shortcut icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n-<link rel=\"icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n-<link rel=\"apple-touch-icon\" href=\"pic/mylogo.png\" />\r\n-<link href=\"css/delivery2.css\" rel=\"stylesheet\">\r\n-\r\n-</head>\r\n-<body>\r\n-<div class=\"container\" id=\"receiptContent\">\r\n-\r\n-    <!-- ส่วนหัว -->\r\n-    <div class=\"header-info\">\r\n-        <div class=\"company\">\r\n-            <h2>ร้านเลิศชัยไอที</h2>\r\n-            <p>222 หมู่ 14 ตำบลดงลิง อำเภอกมลาไสย จังหวัดกาฬสินธุ์ 46130</p>\r\n-            <p>โทร. 082-1053870</p>\r\n-            <p>gลขประจำตัวผู้เสียภาษีอากร  1460300026921</p>\r\n-            <p>ทะเบียนการค้าเลขที่ 4651552000789</p>\r\n-        </div>\r\n-        <div class=\"logo\">\r\n-            <img src=\"./pic/mylogo.png\" alt=\"logo\">\r\n-        </div>\r\n-    </div>\r\n-\r\n-    <!-- ฟอร์ม -->\r\n-    <form action=\"http://localhost/shop/ยังไม่มี.php\" method=\"post\" id=\"receiptForm\">\r\n-\r\n-        <div class=\"doc-title\">\r\n-            <h2>ใบส่งของ</h2>\r\n-            <div class=\"doc-info\">\r\n-                <label>เลขที่ / NO. : <input type=\"text\" name=\"order_no\" required></label>\r\n-                <span><b>วันที่ / Date :</b> ............................................</span>\r\n-            </div>\r\n-        </div>\r\n-\r\n-        <div class=\"customer-info\">\r\n-            <label>ชื่อลูกค้า: <input type=\"text\" name=\"customer_name\" required></label><br>\r\n-            <label>ที่อยู่ลูกค้า: <textarea name=\"customer_address\" rows=\"2\" required></textarea></label>\r\n-            <br>\r\n-            <label>** ใบสั่งซื้อ / สั่งจ้าง เลขที่  <input type=\"text\" name=\"no_order\" required>*</label>\r\n-        </div>\r\n-\r\n-        <br>\r\n-        <table id=\"itemsTable\">\r\n-            <thead>\r\n-                <tr>\r\n-                    <th>ลำดับ</th>\r\n-                    <th>รายการ</th>\r\n-                    <th>จำนวน</th>\r\n-                    <th>ราคา</th>\r\n-                    <th>หน่วย</th>\r\n-                    <th>ราคารวม</th>\r\n-                    <th>ลบ</th>\r\n-                </tr>\r\n-            </thead>\r\n-            <tbody>\r\n-                <tr>\r\n-                    <td>1</td>\r\n-                    <td><input type=\"text\" name=\"item_name[]\"></td>\r\n-                    <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n-                    <td><input type=\"number\" name=\"price[]\" class=\"price\"> </td>\r\n-                    <td><input type=\"text\" name=\"unit[]\"></td>\r\n-                    <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n-                    <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n-                </tr>\r\n-            </tbody>\r\n-            <tfoot>\r\n-                <!-- รวมเป็นเงินทั้งสิ้น -->\r\n-                 <tr>\r\n-                    <td colspan=\"5\" style=\"text-align:center;font-weight:bold;\">รวมเป็นเงินทั้งสิ้น</td>\r\n-                    <td style=\"text-align:right;font-weight:bold;\">\r\n-                        <span id=\"grandTotalDisplay\">0.00</span>\r\n-                    </td>\r\n-                    <td></td>\r\n-                </tr>\r\n-                <!-- ตัวอักษร -->\r\n-                 <tr>\r\n-                    <td colspan=\"7\" style=\"text-align:left;font-weight:bold;\">\r\n-                        (ตัวอักษร: <span id=\"thaiTextDisplay\">ศูนย์บาทถ้วน</span>)\r\n-                    </td>\r\n-                </tr>\r\n-            </tfoot>\r\n-        </table>\r\n-\r\n-        <input type=\"hidden\" name=\"grand_total\" id=\"grand_total_input\">\r\n-\r\n-        <button type=\"button\" class=\"add-btn\">+</button>\r\n-        <button type=\"button\" class=\"button btn-back\" onclick=\"window.location.href='index.html'\">ย้อนกลับ</button>\r\n-        <button type=\"submit\" class=\"button btn-save\">บันทึกใบเสร็จ</button>\r\n-        <button type=\"button\" class=\"button btn-print\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n-    </form>\r\n-\r\n-\r\n-    <div class=\"signatures-container\">\r\n-    <div class=\"signature left\">\r\n-        <p>\r\n-            (.......................................................)<br>\r\n-            (...............................................)<br>\r\n-            ผู้รับของ<br>\r\n-            วันที่รับของ.................................................\r\n-        </p>\r\n-    </div>\r\n-\r\n-    <div class=\"signature right\">\r\n-        <p>\r\n-            (..............................................................)<br>\r\n-            ( นายเลิศชัย อุดมพันธุ์)<br>\r\n-            ผู้ส่งของ<br>\r\n-            วันที่ส่งของ.................................................\r\n-        </p>\r\n-    </div>\r\n-</div>\r\n-\r\n-\r\n-\r\n-</div>\r\n-\r\n-<script>\r\n-// แปลงตัวเลขเป็นภาษาไทย\r\n-function numberToThaiText(number) {\r\n-    const txtnum = [\"ศูนย์\",\"หนึ่ง\",\"สอง\",\"สาม\",\"สี่\",\"ห้า\",\"หก\",\"เจ็ด\",\"แปด\",\"เก้า\"];\r\n-    const txtdigit = [\"\",\"สิบ\",\"ร้อย\",\"พัน\",\"หมื่น\",\"แสน\",\"ล้าน\"];\r\n-    if(number === 0) return \"ศูนย์บาทถ้วน\";\r\n-    let bahtText = \"\";\r\n-    let numStr = number.toFixed(2).toString();\r\n-    let [intPart, decPart] = numStr.split(\".\");\r\n-    let intLen = intPart.length;\r\n-\r\n-    for(let i=0; i<intLen; i++){\r\n-        let n = parseInt(intPart.charAt(i));\r\n-        let pos = intLen - i - 1;\r\n-        if(n!==0){\r\n-            if(pos==1 && n==1) bahtText += \"สิบ\";\r\n-            else if(pos==1 && n==2) bahtText += \"ยี่สิบ\";\r\n-            else if(pos==0 && n==1 && intLen>1) bahtText += \"เอ็ด\";\r\n-            else bahtText += txtnum[n] + (pos>0?txtdigit[pos]:\"\");\r\n-        }\r\n-    }\r\n-    bahtText += \"บาท\";\r\n-    if(decPart==\"00\") bahtText += \"ถ้วน\";\r\n-    else {\r\n-        let d1 = parseInt(decPart.charAt(0));\r\n-        let d2 = parseInt(decPart.charAt(1));\r\n-        if(d1!=0){\r\n-            if(d1==1) bahtText += \"สิบ\";\r\n-            else if(d1==2) bahtText += \"ยี่สิบ\";\r\n-            else bahtText += txtnum[d1]+\"สิบ\";\r\n-        }\r\n-        if(d2!=0){\r\n-            if(d2==1) bahtText += \"เอ็ดสตางค์\";\r\n-            else bahtText += txtnum[d2]+\"สตางค์\";\r\n-        }\r\n-    }\r\n-    return bahtText;\r\n-}\r\n-\r\n-// คำนวณราคารวม\r\n-function calculateTotals() {\r\n-    let qtys = document.querySelectorAll(\".qty\");\r\n-    let prices = document.querySelectorAll(\".price\");\r\n-    let totals = document.querySelectorAll(\".total\");\r\n-    let grandTotal = 0;\r\n-\r\n-    qtys.forEach((qty, i) => {\r\n-        let q = parseFloat(qty.value) || 0;\r\n-        let p = parseFloat(prices[i].value) || 0;\r\n-        let sum = q * p;\r\n-        totals[i].value = sum.toFixed(2);\r\n-        grandTotal += sum;\r\n-    });\r\n-\r\n-    // แสดงผลรวม\r\n-    document.getElementById(\"grandTotalDisplay\").innerText = grandTotal.toFixed(2);\r\n-    document.getElementById(\"grand_total_input\").value = grandTotal.toFixed(2);\r\n-\r\n-    // แสดงตัวอักษร\r\n-    document.getElementById(\"thaiTextDisplay\").innerText = numberToThaiText(grandTotal);\r\n-}\r\n-\r\n-// event คำนวณอัตโนมัติ\r\n-document.addEventListener(\"input\", function(e){\r\n-    if(e.target.classList.contains(\"qty\") || e.target.classList.contains(\"price\")){\r\n-        calculateTotals();\r\n-    }\r\n-});\r\n-\r\n-// เพิ่มแถวสินค้า\r\n-document.querySelector(\".add-btn\").addEventListener(\"click\", function(){\r\n-    let table = document.getElementById(\"itemsTable\").getElementsByTagName(\"tbody\")[0];\r\n-    let rowCount = table.rows.length;\r\n-    let row = table.insertRow();\r\n-    row.innerHTML = `\r\n-        <td>${rowCount+1}</td>\r\n-        <td><input type=\"text\" name=\"item_name[]\"></td>\r\n-        <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n-        <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n-        <td><input type=\"text\" name=\"unit[]\"></td>\r\n-        <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n-        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n-    `;\r\n-});\r\n-\r\n-// ลบแถวสินค้า\r\n-document.getElementById(\"itemsTable\").addEventListener(\"click\", function(e){\r\n-    if(e.target.classList.contains(\"remove-btn\")){\r\n-        let row = e.target.closest(\"tr\");\r\n-        row.parentNode.removeChild(row);\r\n-        calculateTotals();\r\n-        let rows = document.querySelectorAll(\"#itemsTable tbody tr\");\r\n-        rows.forEach((r, i) => r.cells[0].innerText = i+1);\r\n-    }\r\n-});\r\n-\r\n-// ปุ่มพิมพ์ PDF\r\n-function printPDF() {\r\n-  window.print();\r\n-}\r\n-\r\n-</script>\r\n-</body>\r\n-</html>\r\n"
                },
                {
                    "date": 1758719133873,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n         </div>\r\n     </div>\r\n \r\n     <!-- ฟอร์ม -->\r\n-    <form action=\"http://localhost/shop/delivery2.php\" method=\"post\" id=\"receiptForm\">\r\n+       <form action=\"http://localhost/shop/delivery1.php\" method=\"post\" id=\"receiptForm\" enctype=\"multipart/form-data\">\r\n \r\n         <div class=\"doc-title\">\r\n             <h2>ใบส่งของ</h2>\r\n             <div class=\"doc-info\">\r\n"
                },
                {
                    "date": 1758719196362,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,8 +90,9 @@\n \r\n         <input type=\"hidden\" name=\"grand_total\" id=\"grand_total_input\">\r\n \r\n         <button type=\"button\" class=\"add-btn\">+</button>\r\n+        \r\n         <button type=\"button\" class=\"button btn-back\" onclick=\"window.location.href='index.html'\">ย้อนกลับ</button>\r\n         <button type=\"submit\" class=\"button btn-save\">บันทึกใบเสร็จ</button>\r\n         <button type=\"button\" class=\"button btn-print\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n     </form>\r\n"
                },
                {
                    "date": 1758719202566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,8 +91,11 @@\n         <input type=\"hidden\" name=\"grand_total\" id=\"grand_total_input\">\r\n \r\n         <button type=\"button\" class=\"add-btn\">+</button>\r\n         \r\n+                <div style=\"margin: 15px 0;\">\r\n+            <label>อัพโหลด PDF: <input type=\"file\" name=\"pdf_file\" accept=\"application/pdf\"></label><br><br>\r\n+        </div>\r\n         <button type=\"button\" class=\"button btn-back\" onclick=\"window.location.href='index.html'\">ย้อนกลับ</button>\r\n         <button type=\"submit\" class=\"button btn-save\">บันทึกใบเสร็จ</button>\r\n         <button type=\"button\" class=\"button btn-print\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n     </form>\r\n"
                },
                {
                    "date": 1758722529391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,10 @@\n         </div>\r\n     </div>\r\n \r\n     <!-- ฟอร์ม -->\r\n-       <form action=\"http://localhost/shop/delivery1.php\" method=\"post\" id=\"receiptForm\" enctype=\"multipart/form-data\">\r\n+    <!-- ฟอร์ม -->\r\n+   <form action=\"http://localhost/shop/delivery1.php\" method=\"post\" id=\"receiptForm\" enctype=\"multipart/form-data\"></form> \r\n \r\n         <div class=\"doc-title\">\r\n             <h2>ใบส่งของ</h2>\r\n             <div class=\"doc-info\">\r\n@@ -89,11 +90,15 @@\n         </table>\r\n \r\n         <input type=\"hidden\" name=\"grand_total\" id=\"grand_total_input\">\r\n \r\n-        <button type=\"button\" class=\"add-btn\">+</button>\r\n-        \r\n-                <div style=\"margin: 15px 0;\">\r\n+        <div class=\"button-row\">\r\n+            <button type=\"button\" class=\"add-btn\">+</button>\r\n+            <button type=\"button\" class=\"add-percent\">%</button>\r\n+            <button type=\"button\" class=\"add-item-only\">เพิ่ม</button>\r\n+        </div>\r\n+\r\n+        <div class=\"pdf-upload-container\" style=\"margin: 15px 0;\">\r\n             <label>อัพโหลด PDF: <input type=\"file\" name=\"pdf_file\" accept=\"application/pdf\"></label><br><br>\r\n         </div>\r\n         <button type=\"button\" class=\"button btn-back\" onclick=\"window.location.href='index.html'\">ย้อนกลับ</button>\r\n         <button type=\"submit\" class=\"button btn-save\">บันทึกใบเสร็จ</button>\r\n"
                },
                {
                    "date": 1758722551835,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -199,8 +199,102 @@\n         calculateTotals();\r\n     }\r\n });\r\n \r\n+\r\n+// ปุ่มเปอร์เซ็นต์\r\n+document.querySelector(\".add-percent\").addEventListener(\"click\", function() {\r\n+    let percent = prompt(\"กรอกเปอร์เซ็นต์ที่จะเพิ่ม (เช่น 10 สำหรับ +10%)\");\r\n+    percent = parseFloat(percent);\r\n+    if(isNaN(percent)) return alert(\"กรุณากรอกตัวเลขที่ถูกต้อง\");\r\n+\r\n+    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n+\r\n+    // เพิ่มแถวใหม่สำหรับเปอร์เซ็นต์\r\n+    let rowCount = table.rows.length + 1;\r\n+    let newRow = table.insertRow();\r\n+    newRow.innerHTML = `\r\n+        <td>${rowCount}</td>\r\n+        <td><input type=\"text\" name=\"item_name[]\" value=\" + ${percent}%\"></td>\r\n+        <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n+        <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n+        <td><input type=\"text\" name=\"unit[]\"></td>\r\n+        <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n+        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n+    `;\r\n+    attachEvents(newRow);\r\n+    updateGrandTotal();\r\n+});\r\n+\r\n+// ปรับ attachEvents ให้รองรับ qty/price ของแถว +%\r\n+function attachEvents(row) {\r\n+    let removeBtn = row.querySelector(\".remove-btn\");\r\n+    if(removeBtn){\r\n+        removeBtn.addEventListener(\"click\", function() {\r\n+            row.remove();\r\n+            updateRowNumbers();\r\n+            updateGrandTotal();\r\n+        });\r\n+    }\r\n+\r\n+    let qtyInput = row.querySelector(\".qty\");\r\n+    let priceInput = row.querySelector(\".price\");\r\n+    let totalInput = row.querySelector(\".total\");\r\n+\r\n+    if(qtyInput && priceInput && totalInput){\r\n+        function recalc(){\r\n+            let qty = parseFloat(qtyInput.value) || 0;\r\n+            let price = parseFloat(priceInput.value) || 0;\r\n+            totalInput.value = (qty * price).toFixed(2);\r\n+            updateGrandTotal();\r\n+        }\r\n+        qtyInput.addEventListener(\"input\", recalc);\r\n+        priceInput.addEventListener(\"input\", recalc);\r\n+    }\r\n+}\r\n+\r\n+function updateRowNumbers(){\r\n+    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n+    Array.from(table.rows).forEach((row,index)=>{\r\n+        row.cells[0].textContent = index + 1;\r\n+    });\r\n+}\r\n+\r\n+function updateGrandTotal(){\r\n+    let total = 0;\r\n+    document.querySelectorAll(\".total\").forEach(input=>{\r\n+        total += parseFloat(input.value) || 0;\r\n+    });\r\n+    document.getElementById(\"grandTotalDisplay\").textContent = total.toFixed(2);\r\n+    document.getElementById(\"grand_total_input\").value = total.toFixed(2);\r\n+}\r\n+\r\n+// attach event ให้แถวเริ่มต้น\r\n+document.querySelectorAll(\"#itemsTable tbody tr\").forEach(attachEvents);\r\n+\r\n+document.querySelector(\".add-item-only\").addEventListener(\"click\", function() {\r\n+    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n+\r\n+    // เพิ่มแถวใหม่สำหรับข้อมูลสินค้า\r\n+    let newRow = table.insertRow();\r\n+    newRow.innerHTML = `\r\n+        <td></td> <!-- ลำดับเว้นว่าง -->\r\n+        <td><input type=\"text\" name=\"item_name[]\" placeholder=\"กรอกข้อมูลสินค้า\"></td>\r\n+        <td></td>\r\n+        <td></td>\r\n+        <td></td>\r\n+        <td></td>\r\n+        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n+    `;\r\n+\r\n+    // เพิ่ม event ให้ปุ่มลบ\r\n+    newRow.querySelector(\".remove-btn\").addEventListener(\"click\", function() {\r\n+        newRow.remove();\r\n+        updateGrandTotal(); // ถ้ามีฟังก์ชันอัปเดตรวม\r\n+    });\r\n+});\r\n+\r\n+\r\n // เพิ่มแถวสินค้า\r\n document.querySelector(\".add-btn\").addEventListener(\"click\", function(){\r\n     let table = document.getElementById(\"itemsTable\").getElementsByTagName(\"tbody\")[0];\r\n     let rowCount = table.rows.length;\r\n"
                },
                {
                    "date": 1758723034099,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,8 @@\n         </div>\r\n     </div>\r\n \r\n     <!-- ฟอร์ม -->\r\n-    <!-- ฟอร์ม -->\r\n    <form action=\"http://localhost/shop/delivery1.php\" method=\"post\" id=\"receiptForm\" enctype=\"multipart/form-data\"></form> \r\n \r\n         <div class=\"doc-title\">\r\n             <h2>ใบส่งของ</h2>\r\n"
                },
                {
                    "date": 1758724262957,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,330 @@\n+<!DOCTYPE html>\r\n+<html lang=\"th\">\r\n+<head>\r\n+<meta charset=\"UTF-8\">\r\n+<title>ใบส่งของ</title>\r\n+\r\n+<!-- Site Icons -->\r\n+<link rel=\"shortcut icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n+<link rel=\"icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n+<link rel=\"apple-touch-icon\" href=\"pic/mylogo.png\" />\r\n+<link href=\"css/delivery2.css\" rel=\"stylesheet\">\r\n+\r\n+</head>\r\n+<body>\r\n+<div class=\"container\" id=\"receiptContent\">\r\n+\r\n+    <!-- ส่วนหัว -->\r\n+    <div class=\"header-info\">\r\n+        <div class=\"company\">\r\n+            <h2>ร้านเลิศชัยไอที</h2>\r\n+            <p>222 หมู่ 14 ตำบลดงลิง อำเภอกมลาไสย จังหวัดกาฬสินธุ์ 46130</p>\r\n+            <p>โทร. 082-1053870</p>\r\n+            <p>gลขประจำตัวผู้เสียภาษีอากร  1460300026921</p>\r\n+            <p>ทะเบียนการค้าเลขที่ 4651552000789</p>\r\n+        </div>\r\n+        <div class=\"logo\">\r\n+            <img src=\"./pic/mylogo.png\" alt=\"logo\">\r\n+        </div>\r\n+    </div>\r\n+\r\n+    <!-- ฟอร์ม -->\r\n+   <form action=\"http://localhost/shop/delivery2.php\" method=\"post\" id=\"receiptForm\" enctype=\"multipart/form-data\"></form> \r\n+\r\n+        <div class=\"doc-title\">\r\n+            <h2>ใบส่งของ</h2>\r\n+            <div class=\"doc-info\">\r\n+                <label>เลขที่ / NO. : <input type=\"text\" name=\"delivery_no\" required></label>\r\n+                <span><b>วันที่ / Date :</b> ............................................</span>\r\n+            </div>\r\n+        </div>\r\n+\r\n+        <div class=\"customer-info\">\r\n+            <label>ชื่อลูกค้า: <input type=\"text\" name=\"customer_name\" required></label><br>\r\n+            <label>ที่อยู่ลูกค้า: <textarea name=\"customer_address\" rows=\"2\" required></textarea></label><br>\r\n+            <br>\r\n+            <label>** ใบสั่งซื้อ / สั่งจ้าง เลขที่  <input type=\"text\" name=\"order_no\" required></label>\r\n+        </div>\r\n+\r\n+        <br>\r\n+        <table id=\"itemsTable\">\r\n+            <thead>\r\n+                <tr>\r\n+                    <th>ลำดับ</th>\r\n+                    <th>รายการ</th>\r\n+                    <th>จำนวน</th>\r\n+                    <th>ราคา</th>\r\n+                    <th>หน่วย</th>\r\n+                    <th>ราคารวม</th>\r\n+                    <th>ลบ</th>\r\n+                </tr>\r\n+            </thead>\r\n+            <tbody>\r\n+                <tr>\r\n+                    <td>1</td>\r\n+                    <td><input type=\"text\" name=\"item_name[]\"></td>\r\n+                    <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n+                    <td><input type=\"number\" name=\"price[]\" class=\"price\"> </td>\r\n+                    <td><input type=\"text\" name=\"unit[]\"></td>\r\n+                    <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n+                    <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n+                </tr>\r\n+            </tbody>\r\n+            <tfoot>\r\n+                <!-- รวมเป็นเงินทั้งสิ้น -->\r\n+                 <tr>\r\n+                    <td colspan=\"5\" style=\"text-align:center;font-weight:bold;\">รวมเป็นเงินทั้งสิ้น</td>\r\n+                    <td style=\"text-align:right;font-weight:bold;\">\r\n+                        <span id=\"grandTotalDisplay\">0.00</span>\r\n+                    </td>\r\n+                    <td></td>\r\n+                </tr>\r\n+                <!-- ตัวอักษร -->\r\n+                 <tr>\r\n+                    <td colspan=\"7\" style=\"text-align:left;font-weight:bold;\">\r\n+                        (ตัวอักษร: <span id=\"thaiTextDisplay\">ศูนย์บาทถ้วน</span>)\r\n+                    </td>\r\n+                </tr>\r\n+            </tfoot>\r\n+        </table>\r\n+\r\n+        <input type=\"hidden\" name=\"grand_total\" id=\"grand_total_input\">\r\n+\r\n+        <div class=\"button-row\">\r\n+            <button type=\"button\" class=\"add-btn\">+</button>\r\n+            <button type=\"button\" class=\"add-percent\">%</button>\r\n+            <button type=\"button\" class=\"add-item-only\">เพิ่ม</button>\r\n+        </div>\r\n+\r\n+        <div class=\"pdf-upload-container\" style=\"margin: 15px 0;\">\r\n+            <label>อัพโหลด PDF: <input type=\"file\" name=\"pdf_file\" accept=\"application/pdf\"></label><br><br>\r\n+        </div>\r\n+        <button type=\"button\" class=\"button btn-back\" onclick=\"window.location.href='index.html'\">ย้อนกลับ</button>\r\n+        <button type=\"submit\" class=\"button btn-save\">บันทึกใบเสร็จ</button>\r\n+        <button type=\"button\" class=\"button btn-print\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n+    </form>\r\n+\r\n+\r\n+\r\n+    <div class=\"signatures-container\">\r\n+    <div class=\"signature left\">\r\n+        <p>\r\n+            (.......................................................)<br>\r\n+            (...............................................)<br>\r\n+            ผู้รับของ<br>\r\n+            วันที่รับของ.................................................\r\n+        </p>\r\n+    </div>\r\n+\r\n+    <div class=\"signature right\">\r\n+        <p>\r\n+            (..............................................................)<br>\r\n+            ( นายเลิศชัย อุดมพันธุ์)<br>\r\n+            ผู้ส่งของ<br>\r\n+            วันที่ส่งของ.................................................\r\n+        </p>\r\n+    </div>\r\n+</div>\r\n+\r\n+\r\n+\r\n+</div>\r\n+\r\n+<script>\r\n+// แปลงตัวเลขเป็นภาษาไทย\r\n+function numberToThaiText(number) {\r\n+    const txtnum = [\"ศูนย์\",\"หนึ่ง\",\"สอง\",\"สาม\",\"สี่\",\"ห้า\",\"หก\",\"เจ็ด\",\"แปด\",\"เก้า\"];\r\n+    const txtdigit = [\"\",\"สิบ\",\"ร้อย\",\"พัน\",\"หมื่น\",\"แสน\",\"ล้าน\"];\r\n+    if(number === 0) return \"ศูนย์บาทถ้วน\";\r\n+    let bahtText = \"\";\r\n+    let numStr = number.toFixed(2).toString();\r\n+    let [intPart, decPart] = numStr.split(\".\");\r\n+    let intLen = intPart.length;\r\n+\r\n+    for(let i=0; i<intLen; i++){\r\n+        let n = parseInt(intPart.charAt(i));\r\n+        let pos = intLen - i - 1;\r\n+        if(n!==0){\r\n+            if(pos==1 && n==1) bahtText += \"สิบ\";\r\n+            else if(pos==1 && n==2) bahtText += \"ยี่สิบ\";\r\n+            else if(pos==0 && n==1 && intLen>1) bahtText += \"เอ็ด\";\r\n+            else bahtText += txtnum[n] + (pos>0?txtdigit[pos]:\"\");\r\n+        }\r\n+    }\r\n+    bahtText += \"บาท\";\r\n+    if(decPart==\"00\") bahtText += \"ถ้วน\";\r\n+    else {\r\n+        let d1 = parseInt(decPart.charAt(0));\r\n+        let d2 = parseInt(decPart.charAt(1));\r\n+        if(d1!=0){\r\n+            if(d1==1) bahtText += \"สิบ\";\r\n+            else if(d1==2) bahtText += \"ยี่สิบ\";\r\n+            else bahtText += txtnum[d1]+\"สิบ\";\r\n+        }\r\n+        if(d2!=0){\r\n+            if(d2==1) bahtText += \"เอ็ดสตางค์\";\r\n+            else bahtText += txtnum[d2]+\"สตางค์\";\r\n+        }\r\n+    }\r\n+    return bahtText;\r\n+}\r\n+\r\n+// คำนวณราคารวม\r\n+function calculateTotals() {\r\n+    let qtys = document.querySelectorAll(\".qty\");\r\n+    let prices = document.querySelectorAll(\".price\");\r\n+    let totals = document.querySelectorAll(\".total\");\r\n+    let grandTotal = 0;\r\n+\r\n+    qtys.forEach((qty, i) => {\r\n+        let q = parseFloat(qty.value) || 0;\r\n+        let p = parseFloat(prices[i].value) || 0;\r\n+        let sum = q * p;\r\n+        totals[i].value = sum.toFixed(2);\r\n+        grandTotal += sum;\r\n+    });\r\n+\r\n+    // แสดงผลรวม\r\n+    document.getElementById(\"grandTotalDisplay\").innerText = grandTotal.toFixed(2);\r\n+    document.getElementById(\"grand_total_input\").value = grandTotal.toFixed(2);\r\n+\r\n+    // แสดงตัวอักษร\r\n+    document.getElementById(\"thaiTextDisplay\").innerText = numberToThaiText(grandTotal);\r\n+}\r\n+\r\n+// event คำนวณอัตโนมัติ\r\n+document.addEventListener(\"input\", function(e){\r\n+    if(e.target.classList.contains(\"qty\") || e.target.classList.contains(\"price\")){\r\n+        calculateTotals();\r\n+    }\r\n+});\r\n+\r\n+\r\n+// ปุ่มเปอร์เซ็นต์\r\n+document.querySelector(\".add-percent\").addEventListener(\"click\", function() {\r\n+    let percent = prompt(\"กรอกเปอร์เซ็นต์ที่จะเพิ่ม (เช่น 10 สำหรับ +10%)\");\r\n+    percent = parseFloat(percent);\r\n+    if(isNaN(percent)) return alert(\"กรุณากรอกตัวเลขที่ถูกต้อง\");\r\n+\r\n+    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n+\r\n+    // เพิ่มแถวใหม่สำหรับเปอร์เซ็นต์\r\n+    let rowCount = table.rows.length + 1;\r\n+    let newRow = table.insertRow();\r\n+    newRow.innerHTML = `\r\n+        <td>${rowCount}</td>\r\n+        <td><input type=\"text\" name=\"item_name[]\" value=\" + ${percent}%\"></td>\r\n+        <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n+        <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n+        <td><input type=\"text\" name=\"unit[]\"></td>\r\n+        <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n+        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n+    `;\r\n+    attachEvents(newRow);\r\n+    updateGrandTotal();\r\n+});\r\n+\r\n+// ปรับ attachEvents ให้รองรับ qty/price ของแถว +%\r\n+function attachEvents(row) {\r\n+    let removeBtn = row.querySelector(\".remove-btn\");\r\n+    if(removeBtn){\r\n+        removeBtn.addEventListener(\"click\", function() {\r\n+            row.remove();\r\n+            updateRowNumbers();\r\n+            updateGrandTotal();\r\n+        });\r\n+    }\r\n+\r\n+    let qtyInput = row.querySelector(\".qty\");\r\n+    let priceInput = row.querySelector(\".price\");\r\n+    let totalInput = row.querySelector(\".total\");\r\n+\r\n+    if(qtyInput && priceInput && totalInput){\r\n+        function recalc(){\r\n+            let qty = parseFloat(qtyInput.value) || 0;\r\n+            let price = parseFloat(priceInput.value) || 0;\r\n+            totalInput.value = (qty * price).toFixed(2);\r\n+            updateGrandTotal();\r\n+        }\r\n+        qtyInput.addEventListener(\"input\", recalc);\r\n+        priceInput.addEventListener(\"input\", recalc);\r\n+    }\r\n+}\r\n+\r\n+function updateRowNumbers(){\r\n+    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n+    Array.from(table.rows).forEach((row,index)=>{\r\n+        row.cells[0].textContent = index + 1;\r\n+    });\r\n+}\r\n+\r\n+function updateGrandTotal(){\r\n+    let total = 0;\r\n+    document.querySelectorAll(\".total\").forEach(input=>{\r\n+        total += parseFloat(input.value) || 0;\r\n+    });\r\n+    document.getElementById(\"grandTotalDisplay\").textContent = total.toFixed(2);\r\n+    document.getElementById(\"grand_total_input\").value = total.toFixed(2);\r\n+}\r\n+\r\n+// attach event ให้แถวเริ่มต้น\r\n+document.querySelectorAll(\"#itemsTable tbody tr\").forEach(attachEvents);\r\n+\r\n+document.querySelector(\".add-item-only\").addEventListener(\"click\", function() {\r\n+    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n+\r\n+    // เพิ่มแถวใหม่สำหรับข้อมูลสินค้า\r\n+    let newRow = table.insertRow();\r\n+    newRow.innerHTML = `\r\n+        <td></td> <!-- ลำดับเว้นว่าง -->\r\n+        <td><input type=\"text\" name=\"item_name[]\" placeholder=\"กรอกข้อมูลสินค้า\"></td>\r\n+        <td></td>\r\n+        <td></td>\r\n+        <td></td>\r\n+        <td></td>\r\n+        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n+    `;\r\n+\r\n+    // เพิ่ม event ให้ปุ่มลบ\r\n+    newRow.querySelector(\".remove-btn\").addEventListener(\"click\", function() {\r\n+        newRow.remove();\r\n+        updateGrandTotal(); // ถ้ามีฟังก์ชันอัปเดตรวม\r\n+    });\r\n+});\r\n+\r\n+\r\n+// เพิ่มแถวสินค้า\r\n+document.querySelector(\".add-btn\").addEventListener(\"click\", function(){\r\n+    let table = document.getElementById(\"itemsTable\").getElementsByTagName(\"tbody\")[0];\r\n+    let rowCount = table.rows.length;\r\n+    let row = table.insertRow();\r\n+    row.innerHTML = `\r\n+        <td>${rowCount+1}</td>\r\n+        <td><input type=\"text\" name=\"item_name[]\"></td>\r\n+        <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n+        <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n+        <td><input type=\"text\" name=\"unit[]\"></td>\r\n+        <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n+        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n+    `;\r\n+});\r\n+\r\n+// ลบแถวสินค้า\r\n+document.getElementById(\"itemsTable\").addEventListener(\"click\", function(e){\r\n+    if(e.target.classList.contains(\"remove-btn\")){\r\n+        let row = e.target.closest(\"tr\");\r\n+        row.parentNode.removeChild(row);\r\n+        calculateTotals();\r\n+        let rows = document.querySelectorAll(\"#itemsTable tbody tr\");\r\n+        rows.forEach((r, i) => r.cells[0].innerText = i+1);\r\n+    }\r\n+});\r\n+\r\n+// ปุ่มพิมพ์ PDF\r\n+function printPDF() {\r\n+  window.print();\r\n+}\r\n+\r\n+</script>\r\n+</body>\r\n+</html>\r\n"
                },
                {
                    "date": 1758724952824,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -327,334 +327,4 @@\n \r\n </script>\r\n </body>\r\n </html>\r\n-<!DOCTYPE html>\r\n-<html lang=\"th\">\r\n-<head>\r\n-<meta charset=\"UTF-8\">\r\n-<title>ใบส่งของ</title>\r\n-\r\n-<!-- Site Icons -->\r\n-<link rel=\"shortcut icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n-<link rel=\"icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n-<link rel=\"apple-touch-icon\" href=\"pic/mylogo.png\" />\r\n-<link href=\"css/delivery2.css\" rel=\"stylesheet\">\r\n-\r\n-</head>\r\n-<body>\r\n-<div class=\"container\" id=\"receiptContent\">\r\n-\r\n-    <!-- ส่วนหัว -->\r\n-    <div class=\"header-info\">\r\n-        <div class=\"company\">\r\n-            <h2>ร้านเลิศชัยไอที</h2>\r\n-            <p>222 หมู่ 14 ตำบลดงลิง อำเภอกมลาไสย จังหวัดกาฬสินธุ์ 46130</p>\r\n-            <p>โทร. 082-1053870</p>\r\n-            <p>gลขประจำตัวผู้เสียภาษีอากร  1460300026921</p>\r\n-            <p>ทะเบียนการค้าเลขที่ 4651552000789</p>\r\n-        </div>\r\n-        <div class=\"logo\">\r\n-            <img src=\"./pic/mylogo.png\" alt=\"logo\">\r\n-        </div>\r\n-    </div>\r\n-\r\n-    <!-- ฟอร์ม -->\r\n-   <form action=\"http://localhost/shop/delivery1.php\" method=\"post\" id=\"receiptForm\" enctype=\"multipart/form-data\"></form> \r\n-\r\n-        <div class=\"doc-title\">\r\n-            <h2>ใบส่งของ</h2>\r\n-            <div class=\"doc-info\">\r\n-                <label>เลขที่ / NO. : <input type=\"text\" name=\"delivery_no\" required></label>\r\n-                <span><b>วันที่ / Date :</b> ............................................</span>\r\n-            </div>\r\n-        </div>\r\n-\r\n-        <div class=\"customer-info\">\r\n-            <label>ชื่อลูกค้า: <input type=\"text\" name=\"customer_name\" required></label><br>\r\n-            <label>ที่อยู่ลูกค้า: <textarea name=\"customer_address\" rows=\"2\" required></textarea></label><br>\r\n-            <br>\r\n-            <label>** ใบสั่งซื้อ / สั่งจ้าง เลขที่  <input type=\"text\" name=\"order_no\" required></label>\r\n-        </div>\r\n-\r\n-        <br>\r\n-        <table id=\"itemsTable\">\r\n-            <thead>\r\n-                <tr>\r\n-                    <th>ลำดับ</th>\r\n-                    <th>รายการ</th>\r\n-                    <th>จำนวน</th>\r\n-                    <th>ราคา</th>\r\n-                    <th>หน่วย</th>\r\n-                    <th>ราคารวม</th>\r\n-                    <th>ลบ</th>\r\n-                </tr>\r\n-            </thead>\r\n-            <tbody>\r\n-                <tr>\r\n-                    <td>1</td>\r\n-                    <td><input type=\"text\" name=\"item_name[]\"></td>\r\n-                    <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n-                    <td><input type=\"number\" name=\"price[]\" class=\"price\"> </td>\r\n-                    <td><input type=\"text\" name=\"unit[]\"></td>\r\n-                    <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n-                    <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n-                </tr>\r\n-            </tbody>\r\n-            <tfoot>\r\n-                <!-- รวมเป็นเงินทั้งสิ้น -->\r\n-                 <tr>\r\n-                    <td colspan=\"5\" style=\"text-align:center;font-weight:bold;\">รวมเป็นเงินทั้งสิ้น</td>\r\n-                    <td style=\"text-align:right;font-weight:bold;\">\r\n-                        <span id=\"grandTotalDisplay\">0.00</span>\r\n-                    </td>\r\n-                    <td></td>\r\n-                </tr>\r\n-                <!-- ตัวอักษร -->\r\n-                 <tr>\r\n-                    <td colspan=\"7\" style=\"text-align:left;font-weight:bold;\">\r\n-                        (ตัวอักษร: <span id=\"thaiTextDisplay\">ศูนย์บาทถ้วน</span>)\r\n-                    </td>\r\n-                </tr>\r\n-            </tfoot>\r\n-        </table>\r\n-\r\n-        <input type=\"hidden\" name=\"grand_total\" id=\"grand_total_input\">\r\n-\r\n-        <div class=\"button-row\">\r\n-            <button type=\"button\" class=\"add-btn\">+</button>\r\n-            <button type=\"button\" class=\"add-percent\">%</button>\r\n-            <button type=\"button\" class=\"add-item-only\">เพิ่ม</button>\r\n-        </div>\r\n-\r\n-        <div class=\"pdf-upload-container\" style=\"margin: 15px 0;\">\r\n-            <label>อัพโหลด PDF: <input type=\"file\" name=\"pdf_file\" accept=\"application/pdf\"></label><br><br>\r\n-        </div>\r\n-        <button type=\"button\" class=\"button btn-back\" onclick=\"window.location.href='index.html'\">ย้อนกลับ</button>\r\n-        <button type=\"submit\" class=\"button btn-save\">บันทึกใบเสร็จ</button>\r\n-        <button type=\"button\" class=\"button btn-print\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n-    </form>\r\n-\r\n-\r\n-\r\n-    <div class=\"signatures-container\">\r\n-    <div class=\"signature left\">\r\n-        <p>\r\n-            (.......................................................)<br>\r\n-            (...............................................)<br>\r\n-            ผู้รับของ<br>\r\n-            วันที่รับของ.................................................\r\n-        </p>\r\n-    </div>\r\n-\r\n-    <div class=\"signature right\">\r\n-        <p>\r\n-            (..............................................................)<br>\r\n-            ( นายเลิศชัย อุดมพันธุ์)<br>\r\n-            ผู้ส่งของ<br>\r\n-            วันที่ส่งของ.................................................\r\n-        </p>\r\n-    </div>\r\n-</div>\r\n-\r\n-\r\n-\r\n-</div>\r\n-\r\n-<script>\r\n-// แปลงตัวเลขเป็นภาษาไทย\r\n-function numberToThaiText(number) {\r\n-    const txtnum = [\"ศูนย์\",\"หนึ่ง\",\"สอง\",\"สาม\",\"สี่\",\"ห้า\",\"หก\",\"เจ็ด\",\"แปด\",\"เก้า\"];\r\n-    const txtdigit = [\"\",\"สิบ\",\"ร้อย\",\"พัน\",\"หมื่น\",\"แสน\",\"ล้าน\"];\r\n-    if(number === 0) return \"ศูนย์บาทถ้วน\";\r\n-    let bahtText = \"\";\r\n-    let numStr = number.toFixed(2).toString();\r\n-    let [intPart, decPart] = numStr.split(\".\");\r\n-    let intLen = intPart.length;\r\n-\r\n-    for(let i=0; i<intLen; i++){\r\n-        let n = parseInt(intPart.charAt(i));\r\n-        let pos = intLen - i - 1;\r\n-        if(n!==0){\r\n-            if(pos==1 && n==1) bahtText += \"สิบ\";\r\n-            else if(pos==1 && n==2) bahtText += \"ยี่สิบ\";\r\n-            else if(pos==0 && n==1 && intLen>1) bahtText += \"เอ็ด\";\r\n-            else bahtText += txtnum[n] + (pos>0?txtdigit[pos]:\"\");\r\n-        }\r\n-    }\r\n-    bahtText += \"บาท\";\r\n-    if(decPart==\"00\") bahtText += \"ถ้วน\";\r\n-    else {\r\n-        let d1 = parseInt(decPart.charAt(0));\r\n-        let d2 = parseInt(decPart.charAt(1));\r\n-        if(d1!=0){\r\n-            if(d1==1) bahtText += \"สิบ\";\r\n-            else if(d1==2) bahtText += \"ยี่สิบ\";\r\n-            else bahtText += txtnum[d1]+\"สิบ\";\r\n-        }\r\n-        if(d2!=0){\r\n-            if(d2==1) bahtText += \"เอ็ดสตางค์\";\r\n-            else bahtText += txtnum[d2]+\"สตางค์\";\r\n-        }\r\n-    }\r\n-    return bahtText;\r\n-}\r\n-\r\n-// คำนวณราคารวม\r\n-function calculateTotals() {\r\n-    let qtys = document.querySelectorAll(\".qty\");\r\n-    let prices = document.querySelectorAll(\".price\");\r\n-    let totals = document.querySelectorAll(\".total\");\r\n-    let grandTotal = 0;\r\n-\r\n-    qtys.forEach((qty, i) => {\r\n-        let q = parseFloat(qty.value) || 0;\r\n-        let p = parseFloat(prices[i].value) || 0;\r\n-        let sum = q * p;\r\n-        totals[i].value = sum.toFixed(2);\r\n-        grandTotal += sum;\r\n-    });\r\n-\r\n-    // แสดงผลรวม\r\n-    document.getElementById(\"grandTotalDisplay\").innerText = grandTotal.toFixed(2);\r\n-    document.getElementById(\"grand_total_input\").value = grandTotal.toFixed(2);\r\n-\r\n-    // แสดงตัวอักษร\r\n-    document.getElementById(\"thaiTextDisplay\").innerText = numberToThaiText(grandTotal);\r\n-}\r\n-\r\n-// event คำนวณอัตโนมัติ\r\n-document.addEventListener(\"input\", function(e){\r\n-    if(e.target.classList.contains(\"qty\") || e.target.classList.contains(\"price\")){\r\n-        calculateTotals();\r\n-    }\r\n-});\r\n-\r\n-\r\n-// ปุ่มเปอร์เซ็นต์\r\n-document.querySelector(\".add-percent\").addEventListener(\"click\", function() {\r\n-    let percent = prompt(\"กรอกเปอร์เซ็นต์ที่จะเพิ่ม (เช่น 10 สำหรับ +10%)\");\r\n-    percent = parseFloat(percent);\r\n-    if(isNaN(percent)) return alert(\"กรุณากรอกตัวเลขที่ถูกต้อง\");\r\n-\r\n-    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n-\r\n-    // เพิ่มแถวใหม่สำหรับเปอร์เซ็นต์\r\n-    let rowCount = table.rows.length + 1;\r\n-    let newRow = table.insertRow();\r\n-    newRow.innerHTML = `\r\n-        <td>${rowCount}</td>\r\n-        <td><input type=\"text\" name=\"item_name[]\" value=\" + ${percent}%\"></td>\r\n-        <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n-        <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n-        <td><input type=\"text\" name=\"unit[]\"></td>\r\n-        <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n-        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n-    `;\r\n-    attachEvents(newRow);\r\n-    updateGrandTotal();\r\n-});\r\n-\r\n-// ปรับ attachEvents ให้รองรับ qty/price ของแถว +%\r\n-function attachEvents(row) {\r\n-    let removeBtn = row.querySelector(\".remove-btn\");\r\n-    if(removeBtn){\r\n-        removeBtn.addEventListener(\"click\", function() {\r\n-            row.remove();\r\n-            updateRowNumbers();\r\n-            updateGrandTotal();\r\n-        });\r\n-    }\r\n-\r\n-    let qtyInput = row.querySelector(\".qty\");\r\n-    let priceInput = row.querySelector(\".price\");\r\n-    let totalInput = row.querySelector(\".total\");\r\n-\r\n-    if(qtyInput && priceInput && totalInput){\r\n-        function recalc(){\r\n-            let qty = parseFloat(qtyInput.value) || 0;\r\n-            let price = parseFloat(priceInput.value) || 0;\r\n-            totalInput.value = (qty * price).toFixed(2);\r\n-            updateGrandTotal();\r\n-        }\r\n-        qtyInput.addEventListener(\"input\", recalc);\r\n-        priceInput.addEventListener(\"input\", recalc);\r\n-    }\r\n-}\r\n-\r\n-function updateRowNumbers(){\r\n-    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n-    Array.from(table.rows).forEach((row,index)=>{\r\n-        row.cells[0].textContent = index + 1;\r\n-    });\r\n-}\r\n-\r\n-function updateGrandTotal(){\r\n-    let total = 0;\r\n-    document.querySelectorAll(\".total\").forEach(input=>{\r\n-        total += parseFloat(input.value) || 0;\r\n-    });\r\n-    document.getElementById(\"grandTotalDisplay\").textContent = total.toFixed(2);\r\n-    document.getElementById(\"grand_total_input\").value = total.toFixed(2);\r\n-}\r\n-\r\n-// attach event ให้แถวเริ่มต้น\r\n-document.querySelectorAll(\"#itemsTable tbody tr\").forEach(attachEvents);\r\n-\r\n-document.querySelector(\".add-item-only\").addEventListener(\"click\", function() {\r\n-    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n-\r\n-    // เพิ่มแถวใหม่สำหรับข้อมูลสินค้า\r\n-    let newRow = table.insertRow();\r\n-    newRow.innerHTML = `\r\n-        <td></td> <!-- ลำดับเว้นว่าง -->\r\n-        <td><input type=\"text\" name=\"item_name[]\" placeholder=\"กรอกข้อมูลสินค้า\"></td>\r\n-        <td></td>\r\n-        <td></td>\r\n-        <td></td>\r\n-        <td></td>\r\n-        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n-    `;\r\n-\r\n-    // เพิ่ม event ให้ปุ่มลบ\r\n-    newRow.querySelector(\".remove-btn\").addEventListener(\"click\", function() {\r\n-        newRow.remove();\r\n-        updateGrandTotal(); // ถ้ามีฟังก์ชันอัปเดตรวม\r\n-    });\r\n-});\r\n-\r\n-\r\n-// เพิ่มแถวสินค้า\r\n-document.querySelector(\".add-btn\").addEventListener(\"click\", function(){\r\n-    let table = document.getElementById(\"itemsTable\").getElementsByTagName(\"tbody\")[0];\r\n-    let rowCount = table.rows.length;\r\n-    let row = table.insertRow();\r\n-    row.innerHTML = `\r\n-        <td>${rowCount+1}</td>\r\n-        <td><input type=\"text\" name=\"item_name[]\"></td>\r\n-        <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n-        <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n-        <td><input type=\"text\" name=\"unit[]\"></td>\r\n-        <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n-        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n-    `;\r\n-});\r\n-\r\n-// ลบแถวสินค้า\r\n-document.getElementById(\"itemsTable\").addEventListener(\"click\", function(e){\r\n-    if(e.target.classList.contains(\"remove-btn\")){\r\n-        let row = e.target.closest(\"tr\");\r\n-        row.parentNode.removeChild(row);\r\n-        calculateTotals();\r\n-        let rows = document.querySelectorAll(\"#itemsTable tbody tr\");\r\n-        rows.forEach((r, i) => r.cells[0].innerText = i+1);\r\n-    }\r\n-});\r\n-\r\n-// ปุ่มพิมพ์ PDF\r\n-function printPDF() {\r\n-  window.print();\r\n-}\r\n-\r\n-</script>\r\n-</body>\r\n-</html>\r\n"
                },
                {
                    "date": 1758724986882,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n         </div>\r\n     </div>\r\n \r\n     <!-- ฟอร์ม -->\r\n-   <form action=\"http://localhost/shop/delivery2.php\" method=\"post\" id=\"receiptForm\" enctype=\"multipart/form-data\"></form> \r\n+   <form action=\"http://localhost/shop/delivery1.php\" method=\"post\" id=\"receiptForm\" enctype=\"multipart/form-data\"></form> \r\n \r\n         <div class=\"doc-title\">\r\n             <h2>ใบส่งของ</h2>\r\n             <div class=\"doc-info\">\r\n"
                },
                {
                    "date": 1758725150543,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n         </div>\r\n     </div>\r\n \r\n     <!-- ฟอร์ม -->\r\n-   <form action=\"http://localhost/shop/delivery1.php\" method=\"post\" id=\"receiptForm\" enctype=\"multipart/form-data\"></form> \r\n+   <form action=\"http://localhost/shop/delivery1.php\" method=\"post\" id=\"receiptForm\" enctype=\"multipart/form-data\"> \r\n \r\n         <div class=\"doc-title\">\r\n             <h2>ใบส่งของ</h2>\r\n             <div class=\"doc-info\">\r\n"
                },
                {
                    "date": 1758725367330,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n         </div>\r\n     </div>\r\n \r\n     <!-- ฟอร์ม -->\r\n-   <form action=\"http://localhost/shop/delivery1.php\" method=\"post\" id=\"receiptForm\" enctype=\"multipart/form-data\"> \r\n+   <form action=\"http://localhost/shop/delivery2.php\" method=\"post\" id=\"receiptForm\" enctype=\"multipart/form-data\"> \r\n \r\n         <div class=\"doc-title\">\r\n             <h2>ใบส่งของ</h2>\r\n             <div class=\"doc-info\">\r\n"
                },
                {
                    "date": 1758772249940,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -168,140 +168,88 @@\n     }\r\n     return bahtText;\r\n }\r\n \r\n-// คำนวณราคารวม\r\n+// รวมทุกการคำนวณ\r\n function calculateTotals() {\r\n-    let qtys = document.querySelectorAll(\".qty\");\r\n-    let prices = document.querySelectorAll(\".price\");\r\n-    let totals = document.querySelectorAll(\".total\");\r\n+    let table = document.querySelector(\"#itemsTable tbody\");\r\n     let grandTotal = 0;\r\n \r\n-    qtys.forEach((qty, i) => {\r\n-        let q = parseFloat(qty.value) || 0;\r\n-        let p = parseFloat(prices[i].value) || 0;\r\n-        let sum = q * p;\r\n-        totals[i].value = sum.toFixed(2);\r\n-        grandTotal += sum;\r\n+    Array.from(table.rows).forEach(row => {\r\n+        let qty = parseFloat(row.querySelector(\".qty\")?.value) || 0;\r\n+        let price = parseFloat(row.querySelector(\".price\")?.value) || 0;\r\n+        let totalInput = row.querySelector(\".total\");\r\n+        let itemNameInput = row.querySelector(\".item-name\");\r\n+\r\n+        let subtotal = qty * price;\r\n+\r\n+        // คำนวณ % ถ้ามี\r\n+        if(row.hasAttribute(\"data-percent\")){\r\n+            let percent = parseFloat(row.getAttribute(\"data-percent\")) || 0;\r\n+            subtotal += subtotal * (percent / 100);\r\n+\r\n+            // อัปเดตชื่อสินค้าให้โชว์ +%\r\n+            if(itemNameInput){\r\n+                let baseName = itemNameInput.value.split(\" +\")[0].split(\" -\")[0];\r\n+                itemNameInput.value = percent >= 0 ? `${baseName} +${percent}%` : `${baseName} ${percent}%`;\r\n+            }\r\n+        }\r\n+\r\n+        if(totalInput) totalInput.value = subtotal.toFixed(2);\r\n+        grandTotal += subtotal;\r\n     });\r\n \r\n     // แสดงผลรวม\r\n     document.getElementById(\"grandTotalDisplay\").innerText = grandTotal.toFixed(2);\r\n     document.getElementById(\"grand_total_input\").value = grandTotal.toFixed(2);\r\n-\r\n-    // แสดงตัวอักษร\r\n     document.getElementById(\"thaiTextDisplay\").innerText = numberToThaiText(grandTotal);\r\n }\r\n \r\n-// event คำนวณอัตโนมัติ\r\n+// Event คำนวณอัตโนมัติ\r\n document.addEventListener(\"input\", function(e){\r\n-    if(e.target.classList.contains(\"qty\") || e.target.classList.contains(\"price\")){\r\n+    if(e.target.classList.contains(\"qty\") || e.target.classList.contains(\"price\") || e.target.classList.contains(\"item-name\")){\r\n         calculateTotals();\r\n     }\r\n });\r\n \r\n+// อัปเดตเลขลำดับ\r\n+function updateRowNumbers(){\r\n+    let table = document.querySelector(\"#itemsTable tbody\");\r\n+    Array.from(table.rows).forEach((row,index)=>{\r\n+        row.cells[0].textContent = index + 1;\r\n+    });\r\n+}\r\n \r\n-// ปุ่มเปอร์เซ็นต์\r\n-document.querySelector(\".add-percent\").addEventListener(\"click\", function() {\r\n-    let percent = prompt(\"กรอกเปอร์เซ็นต์ที่จะเพิ่ม (เช่น 10 สำหรับ +10%)\");\r\n-    percent = parseFloat(percent);\r\n-    if(isNaN(percent)) return alert(\"กรุณากรอกตัวเลขที่ถูกต้อง\");\r\n-\r\n-    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n-\r\n-    // เพิ่มแถวใหม่สำหรับเปอร์เซ็นต์\r\n-    let rowCount = table.rows.length + 1;\r\n-    let newRow = table.insertRow();\r\n-    newRow.innerHTML = `\r\n-        <td>${rowCount}</td>\r\n-        <td><input type=\"text\" name=\"item_name[]\" value=\" + ${percent}%\"></td>\r\n+// เพิ่มแถวสินค้า\r\n+document.querySelector(\".add-btn\").addEventListener(\"click\", function(){\r\n+    let table = document.querySelector(\"#itemsTable tbody\");\r\n+    let rowCount = table.rows.length;\r\n+    let row = table.insertRow();\r\n+    row.innerHTML = `\r\n+        <td>${rowCount+1}</td>\r\n+        <td><input type=\"text\" name=\"item_name[]\" class=\"item-name\" placeholder=\"กรอกชื่อสินค้า\"></td>\r\n         <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n         <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n         <td><input type=\"text\" name=\"unit[]\"></td>\r\n         <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n         <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n     `;\r\n-    attachEvents(newRow);\r\n-    updateGrandTotal();\r\n });\r\n \r\n-// ปรับ attachEvents ให้รองรับ qty/price ของแถว +%\r\n-function attachEvents(row) {\r\n-    let removeBtn = row.querySelector(\".remove-btn\");\r\n-    if(removeBtn){\r\n-        removeBtn.addEventListener(\"click\", function() {\r\n-            row.remove();\r\n-            updateRowNumbers();\r\n-            updateGrandTotal();\r\n-        });\r\n-    }\r\n+// เพิ่มแถวเปอร์เซ็นต์\r\n+document.querySelector(\".add-percent\").addEventListener(\"click\", function() {\r\n+    let percent = prompt(\"กรอกเปอร์เซ็นต์ (เช่น 10 สำหรับ +10% หรือ -5 สำหรับ -5%)\");\r\n+    percent = parseFloat(percent);\r\n+    if(isNaN(percent)) return alert(\"กรุณากรอกตัวเลขที่ถูกต้อง\");\r\n \r\n-    let qtyInput = row.querySelector(\".qty\");\r\n-    let priceInput = row.querySelector(\".price\");\r\n-    let totalInput = row.querySelector(\".total\");\r\n+    let table = document.querySelector(\"#itemsTable tbody\");\r\n+    let rowCount = table.rows.length + 1;\r\n \r\n-    if(qtyInput && priceInput && totalInput){\r\n-        function recalc(){\r\n-            let qty = parseFloat(qtyInput.value) || 0;\r\n-            let price = parseFloat(priceInput.value) || 0;\r\n-            totalInput.value = (qty * price).toFixed(2);\r\n-            updateGrandTotal();\r\n-        }\r\n-        qtyInput.addEventListener(\"input\", recalc);\r\n-        priceInput.addEventListener(\"input\", recalc);\r\n-    }\r\n-}\r\n-\r\n-function updateRowNumbers(){\r\n-    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n-    Array.from(table.rows).forEach((row,index)=>{\r\n-        row.cells[0].textContent = index + 1;\r\n-    });\r\n-}\r\n-\r\n-function updateGrandTotal(){\r\n-    let total = 0;\r\n-    document.querySelectorAll(\".total\").forEach(input=>{\r\n-        total += parseFloat(input.value) || 0;\r\n-    });\r\n-    document.getElementById(\"grandTotalDisplay\").textContent = total.toFixed(2);\r\n-    document.getElementById(\"grand_total_input\").value = total.toFixed(2);\r\n-}\r\n-\r\n-// attach event ให้แถวเริ่มต้น\r\n-document.querySelectorAll(\"#itemsTable tbody tr\").forEach(attachEvents);\r\n-\r\n-document.querySelector(\".add-item-only\").addEventListener(\"click\", function() {\r\n-    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n-\r\n-    // เพิ่มแถวใหม่สำหรับข้อมูลสินค้า\r\n     let newRow = table.insertRow();\r\n+    newRow.setAttribute(\"data-percent\", percent); // เก็บค่าเปอร์เซ็นต์\r\n     newRow.innerHTML = `\r\n-        <td></td> <!-- ลำดับเว้นว่าง -->\r\n-        <td><input type=\"text\" name=\"item_name[]\" placeholder=\"กรอกข้อมูลสินค้า\"></td>\r\n-        <td></td>\r\n-        <td></td>\r\n-        <td></td>\r\n-        <td></td>\r\n-        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n-    `;\r\n-\r\n-    // เพิ่ม event ให้ปุ่มลบ\r\n-    newRow.querySelector(\".remove-btn\").addEventListener(\"click\", function() {\r\n-        newRow.remove();\r\n-        updateGrandTotal(); // ถ้ามีฟังก์ชันอัปเดตรวม\r\n-    });\r\n-});\r\n-\r\n-\r\n-// เพิ่มแถวสินค้า\r\n-document.querySelector(\".add-btn\").addEventListener(\"click\", function(){\r\n-    let table = document.getElementById(\"itemsTable\").getElementsByTagName(\"tbody\")[0];\r\n-    let rowCount = table.rows.length;\r\n-    let row = table.insertRow();\r\n-    row.innerHTML = `\r\n-        <td>${rowCount+1}</td>\r\n-        <td><input type=\"text\" name=\"item_name[]\"></td>\r\n+        <td>${rowCount}</td>\r\n+        <td><input type=\"text\" name=\"item_name[]\" class=\"item-name\" placeholder=\"กรอกชื่อสินค้า\"></td>\r\n         <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n         <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n         <td><input type=\"text\" name=\"unit[]\"></td>\r\n         <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n@@ -309,22 +257,18 @@\n     `;\r\n });\r\n \r\n // ลบแถวสินค้า\r\n-document.getElementById(\"itemsTable\").addEventListener(\"click\", function(e){\r\n+document.querySelector(\"#itemsTable\").addEventListener(\"click\", function(e){\r\n     if(e.target.classList.contains(\"remove-btn\")){\r\n         let row = e.target.closest(\"tr\");\r\n         row.parentNode.removeChild(row);\r\n+        updateRowNumbers();\r\n         calculateTotals();\r\n-        let rows = document.querySelectorAll(\"#itemsTable tbody tr\");\r\n-        rows.forEach((r, i) => r.cells[0].innerText = i+1);\r\n     }\r\n });\r\n \r\n // ปุ่มพิมพ์ PDF\r\n function printPDF() {\r\n-  window.print();\r\n+    window.print();\r\n }\r\n-\r\n-</script>\r\n-</body>\r\n-</html>\r\n+</script>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1758772255482,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -168,88 +168,140 @@\n     }\r\n     return bahtText;\r\n }\r\n \r\n-// รวมทุกการคำนวณ\r\n+// คำนวณราคารวม\r\n function calculateTotals() {\r\n-    let table = document.querySelector(\"#itemsTable tbody\");\r\n+    let qtys = document.querySelectorAll(\".qty\");\r\n+    let prices = document.querySelectorAll(\".price\");\r\n+    let totals = document.querySelectorAll(\".total\");\r\n     let grandTotal = 0;\r\n \r\n-    Array.from(table.rows).forEach(row => {\r\n-        let qty = parseFloat(row.querySelector(\".qty\")?.value) || 0;\r\n-        let price = parseFloat(row.querySelector(\".price\")?.value) || 0;\r\n-        let totalInput = row.querySelector(\".total\");\r\n-        let itemNameInput = row.querySelector(\".item-name\");\r\n-\r\n-        let subtotal = qty * price;\r\n-\r\n-        // คำนวณ % ถ้ามี\r\n-        if(row.hasAttribute(\"data-percent\")){\r\n-            let percent = parseFloat(row.getAttribute(\"data-percent\")) || 0;\r\n-            subtotal += subtotal * (percent / 100);\r\n-\r\n-            // อัปเดตชื่อสินค้าให้โชว์ +%\r\n-            if(itemNameInput){\r\n-                let baseName = itemNameInput.value.split(\" +\")[0].split(\" -\")[0];\r\n-                itemNameInput.value = percent >= 0 ? `${baseName} +${percent}%` : `${baseName} ${percent}%`;\r\n-            }\r\n-        }\r\n-\r\n-        if(totalInput) totalInput.value = subtotal.toFixed(2);\r\n-        grandTotal += subtotal;\r\n+    qtys.forEach((qty, i) => {\r\n+        let q = parseFloat(qty.value) || 0;\r\n+        let p = parseFloat(prices[i].value) || 0;\r\n+        let sum = q * p;\r\n+        totals[i].value = sum.toFixed(2);\r\n+        grandTotal += sum;\r\n     });\r\n \r\n     // แสดงผลรวม\r\n     document.getElementById(\"grandTotalDisplay\").innerText = grandTotal.toFixed(2);\r\n     document.getElementById(\"grand_total_input\").value = grandTotal.toFixed(2);\r\n+\r\n+    // แสดงตัวอักษร\r\n     document.getElementById(\"thaiTextDisplay\").innerText = numberToThaiText(grandTotal);\r\n }\r\n \r\n-// Event คำนวณอัตโนมัติ\r\n+// event คำนวณอัตโนมัติ\r\n document.addEventListener(\"input\", function(e){\r\n-    if(e.target.classList.contains(\"qty\") || e.target.classList.contains(\"price\") || e.target.classList.contains(\"item-name\")){\r\n+    if(e.target.classList.contains(\"qty\") || e.target.classList.contains(\"price\")){\r\n         calculateTotals();\r\n     }\r\n });\r\n \r\n-// อัปเดตเลขลำดับ\r\n-function updateRowNumbers(){\r\n-    let table = document.querySelector(\"#itemsTable tbody\");\r\n-    Array.from(table.rows).forEach((row,index)=>{\r\n-        row.cells[0].textContent = index + 1;\r\n-    });\r\n-}\r\n \r\n-// เพิ่มแถวสินค้า\r\n-document.querySelector(\".add-btn\").addEventListener(\"click\", function(){\r\n-    let table = document.querySelector(\"#itemsTable tbody\");\r\n-    let rowCount = table.rows.length;\r\n-    let row = table.insertRow();\r\n-    row.innerHTML = `\r\n-        <td>${rowCount+1}</td>\r\n-        <td><input type=\"text\" name=\"item_name[]\" class=\"item-name\" placeholder=\"กรอกชื่อสินค้า\"></td>\r\n+// ปุ่มเปอร์เซ็นต์\r\n+document.querySelector(\".add-percent\").addEventListener(\"click\", function() {\r\n+    let percent = prompt(\"กรอกเปอร์เซ็นต์ที่จะเพิ่ม (เช่น 10 สำหรับ +10%)\");\r\n+    percent = parseFloat(percent);\r\n+    if(isNaN(percent)) return alert(\"กรุณากรอกตัวเลขที่ถูกต้อง\");\r\n+\r\n+    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n+\r\n+    // เพิ่มแถวใหม่สำหรับเปอร์เซ็นต์\r\n+    let rowCount = table.rows.length + 1;\r\n+    let newRow = table.insertRow();\r\n+    newRow.innerHTML = `\r\n+        <td>${rowCount}</td>\r\n+        <td><input type=\"text\" name=\"item_name[]\" value=\" + ${percent}%\"></td>\r\n         <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n         <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n         <td><input type=\"text\" name=\"unit[]\"></td>\r\n         <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n         <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n     `;\r\n+    attachEvents(newRow);\r\n+    updateGrandTotal();\r\n });\r\n \r\n-// เพิ่มแถวเปอร์เซ็นต์\r\n-document.querySelector(\".add-percent\").addEventListener(\"click\", function() {\r\n-    let percent = prompt(\"กรอกเปอร์เซ็นต์ (เช่น 10 สำหรับ +10% หรือ -5 สำหรับ -5%)\");\r\n-    percent = parseFloat(percent);\r\n-    if(isNaN(percent)) return alert(\"กรุณากรอกตัวเลขที่ถูกต้อง\");\r\n+// ปรับ attachEvents ให้รองรับ qty/price ของแถว +%\r\n+function attachEvents(row) {\r\n+    let removeBtn = row.querySelector(\".remove-btn\");\r\n+    if(removeBtn){\r\n+        removeBtn.addEventListener(\"click\", function() {\r\n+            row.remove();\r\n+            updateRowNumbers();\r\n+            updateGrandTotal();\r\n+        });\r\n+    }\r\n \r\n-    let table = document.querySelector(\"#itemsTable tbody\");\r\n-    let rowCount = table.rows.length + 1;\r\n+    let qtyInput = row.querySelector(\".qty\");\r\n+    let priceInput = row.querySelector(\".price\");\r\n+    let totalInput = row.querySelector(\".total\");\r\n \r\n+    if(qtyInput && priceInput && totalInput){\r\n+        function recalc(){\r\n+            let qty = parseFloat(qtyInput.value) || 0;\r\n+            let price = parseFloat(priceInput.value) || 0;\r\n+            totalInput.value = (qty * price).toFixed(2);\r\n+            updateGrandTotal();\r\n+        }\r\n+        qtyInput.addEventListener(\"input\", recalc);\r\n+        priceInput.addEventListener(\"input\", recalc);\r\n+    }\r\n+}\r\n+\r\n+function updateRowNumbers(){\r\n+    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n+    Array.from(table.rows).forEach((row,index)=>{\r\n+        row.cells[0].textContent = index + 1;\r\n+    });\r\n+}\r\n+\r\n+function updateGrandTotal(){\r\n+    let total = 0;\r\n+    document.querySelectorAll(\".total\").forEach(input=>{\r\n+        total += parseFloat(input.value) || 0;\r\n+    });\r\n+    document.getElementById(\"grandTotalDisplay\").textContent = total.toFixed(2);\r\n+    document.getElementById(\"grand_total_input\").value = total.toFixed(2);\r\n+}\r\n+\r\n+// attach event ให้แถวเริ่มต้น\r\n+document.querySelectorAll(\"#itemsTable tbody tr\").forEach(attachEvents);\r\n+\r\n+document.querySelector(\".add-item-only\").addEventListener(\"click\", function() {\r\n+    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n+\r\n+    // เพิ่มแถวใหม่สำหรับข้อมูลสินค้า\r\n     let newRow = table.insertRow();\r\n-    newRow.setAttribute(\"data-percent\", percent); // เก็บค่าเปอร์เซ็นต์\r\n     newRow.innerHTML = `\r\n-        <td>${rowCount}</td>\r\n-        <td><input type=\"text\" name=\"item_name[]\" class=\"item-name\" placeholder=\"กรอกชื่อสินค้า\"></td>\r\n+        <td></td> <!-- ลำดับเว้นว่าง -->\r\n+        <td><input type=\"text\" name=\"item_name[]\" placeholder=\"กรอกข้อมูลสินค้า\"></td>\r\n+        <td></td>\r\n+        <td></td>\r\n+        <td></td>\r\n+        <td></td>\r\n+        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n+    `;\r\n+\r\n+    // เพิ่ม event ให้ปุ่มลบ\r\n+    newRow.querySelector(\".remove-btn\").addEventListener(\"click\", function() {\r\n+        newRow.remove();\r\n+        updateGrandTotal(); // ถ้ามีฟังก์ชันอัปเดตรวม\r\n+    });\r\n+});\r\n+\r\n+\r\n+// เพิ่มแถวสินค้า\r\n+document.querySelector(\".add-btn\").addEventListener(\"click\", function(){\r\n+    let table = document.getElementById(\"itemsTable\").getElementsByTagName(\"tbody\")[0];\r\n+    let rowCount = table.rows.length;\r\n+    let row = table.insertRow();\r\n+    row.innerHTML = `\r\n+        <td>${rowCount+1}</td>\r\n+        <td><input type=\"text\" name=\"item_name[]\"></td>\r\n         <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n         <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n         <td><input type=\"text\" name=\"unit[]\"></td>\r\n         <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n@@ -257,18 +309,22 @@\n     `;\r\n });\r\n \r\n // ลบแถวสินค้า\r\n-document.querySelector(\"#itemsTable\").addEventListener(\"click\", function(e){\r\n+document.getElementById(\"itemsTable\").addEventListener(\"click\", function(e){\r\n     if(e.target.classList.contains(\"remove-btn\")){\r\n         let row = e.target.closest(\"tr\");\r\n         row.parentNode.removeChild(row);\r\n-        updateRowNumbers();\r\n         calculateTotals();\r\n+        let rows = document.querySelectorAll(\"#itemsTable tbody tr\");\r\n+        rows.forEach((r, i) => r.cells[0].innerText = i+1);\r\n     }\r\n });\r\n \r\n // ปุ่มพิมพ์ PDF\r\n function printPDF() {\r\n\\ No newline at end of file\n-    window.print();\r\n+  window.print();\r\n }\r\n-</script>\n+\r\n+</script>\r\n+</body>\r\n+</html>\r\n"
                },
                {
                    "date": 1758772261243,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -168,140 +168,88 @@\n     }\r\n     return bahtText;\r\n }\r\n \r\n-// คำนวณราคารวม\r\n+// รวมทุกการคำนวณ\r\n function calculateTotals() {\r\n-    let qtys = document.querySelectorAll(\".qty\");\r\n-    let prices = document.querySelectorAll(\".price\");\r\n-    let totals = document.querySelectorAll(\".total\");\r\n+    let table = document.querySelector(\"#itemsTable tbody\");\r\n     let grandTotal = 0;\r\n \r\n-    qtys.forEach((qty, i) => {\r\n-        let q = parseFloat(qty.value) || 0;\r\n-        let p = parseFloat(prices[i].value) || 0;\r\n-        let sum = q * p;\r\n-        totals[i].value = sum.toFixed(2);\r\n-        grandTotal += sum;\r\n+    Array.from(table.rows).forEach(row => {\r\n+        let qty = parseFloat(row.querySelector(\".qty\")?.value) || 0;\r\n+        let price = parseFloat(row.querySelector(\".price\")?.value) || 0;\r\n+        let totalInput = row.querySelector(\".total\");\r\n+        let itemNameInput = row.querySelector(\".item-name\");\r\n+\r\n+        let subtotal = qty * price;\r\n+\r\n+        // คำนวณ % ถ้ามี\r\n+        if(row.hasAttribute(\"data-percent\")){\r\n+            let percent = parseFloat(row.getAttribute(\"data-percent\")) || 0;\r\n+            subtotal += subtotal * (percent / 100);\r\n+\r\n+            // อัปเดตชื่อสินค้าให้โชว์ +%\r\n+            if(itemNameInput){\r\n+                let baseName = itemNameInput.value.split(\" +\")[0].split(\" -\")[0];\r\n+                itemNameInput.value = percent >= 0 ? `${baseName} +${percent}%` : `${baseName} ${percent}%`;\r\n+            }\r\n+        }\r\n+\r\n+        if(totalInput) totalInput.value = subtotal.toFixed(2);\r\n+        grandTotal += subtotal;\r\n     });\r\n \r\n     // แสดงผลรวม\r\n     document.getElementById(\"grandTotalDisplay\").innerText = grandTotal.toFixed(2);\r\n     document.getElementById(\"grand_total_input\").value = grandTotal.toFixed(2);\r\n-\r\n-    // แสดงตัวอักษร\r\n     document.getElementById(\"thaiTextDisplay\").innerText = numberToThaiText(grandTotal);\r\n }\r\n \r\n-// event คำนวณอัตโนมัติ\r\n+// Event คำนวณอัตโนมัติ\r\n document.addEventListener(\"input\", function(e){\r\n-    if(e.target.classList.contains(\"qty\") || e.target.classList.contains(\"price\")){\r\n+    if(e.target.classList.contains(\"qty\") || e.target.classList.contains(\"price\") || e.target.classList.contains(\"item-name\")){\r\n         calculateTotals();\r\n     }\r\n });\r\n \r\n+// อัปเดตเลขลำดับ\r\n+function updateRowNumbers(){\r\n+    let table = document.querySelector(\"#itemsTable tbody\");\r\n+    Array.from(table.rows).forEach((row,index)=>{\r\n+        row.cells[0].textContent = index + 1;\r\n+    });\r\n+}\r\n \r\n-// ปุ่มเปอร์เซ็นต์\r\n-document.querySelector(\".add-percent\").addEventListener(\"click\", function() {\r\n-    let percent = prompt(\"กรอกเปอร์เซ็นต์ที่จะเพิ่ม (เช่น 10 สำหรับ +10%)\");\r\n-    percent = parseFloat(percent);\r\n-    if(isNaN(percent)) return alert(\"กรุณากรอกตัวเลขที่ถูกต้อง\");\r\n-\r\n-    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n-\r\n-    // เพิ่มแถวใหม่สำหรับเปอร์เซ็นต์\r\n-    let rowCount = table.rows.length + 1;\r\n-    let newRow = table.insertRow();\r\n-    newRow.innerHTML = `\r\n-        <td>${rowCount}</td>\r\n-        <td><input type=\"text\" name=\"item_name[]\" value=\" + ${percent}%\"></td>\r\n+// เพิ่มแถวสินค้า\r\n+document.querySelector(\".add-btn\").addEventListener(\"click\", function(){\r\n+    let table = document.querySelector(\"#itemsTable tbody\");\r\n+    let rowCount = table.rows.length;\r\n+    let row = table.insertRow();\r\n+    row.innerHTML = `\r\n+        <td>${rowCount+1}</td>\r\n+        <td><input type=\"text\" name=\"item_name[]\" class=\"item-name\" placeholder=\"กรอกชื่อสินค้า\"></td>\r\n         <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n         <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n         <td><input type=\"text\" name=\"unit[]\"></td>\r\n         <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n         <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n     `;\r\n-    attachEvents(newRow);\r\n-    updateGrandTotal();\r\n });\r\n \r\n-// ปรับ attachEvents ให้รองรับ qty/price ของแถว +%\r\n-function attachEvents(row) {\r\n-    let removeBtn = row.querySelector(\".remove-btn\");\r\n-    if(removeBtn){\r\n-        removeBtn.addEventListener(\"click\", function() {\r\n-            row.remove();\r\n-            updateRowNumbers();\r\n-            updateGrandTotal();\r\n-        });\r\n-    }\r\n+// เพิ่มแถวเปอร์เซ็นต์\r\n+document.querySelector(\".add-percent\").addEventListener(\"click\", function() {\r\n+    let percent = prompt(\"กรอกเปอร์เซ็นต์ (เช่น 10 สำหรับ +10% หรือ -5 สำหรับ -5%)\");\r\n+    percent = parseFloat(percent);\r\n+    if(isNaN(percent)) return alert(\"กรุณากรอกตัวเลขที่ถูกต้อง\");\r\n \r\n-    let qtyInput = row.querySelector(\".qty\");\r\n-    let priceInput = row.querySelector(\".price\");\r\n-    let totalInput = row.querySelector(\".total\");\r\n+    let table = document.querySelector(\"#itemsTable tbody\");\r\n+    let rowCount = table.rows.length + 1;\r\n \r\n-    if(qtyInput && priceInput && totalInput){\r\n-        function recalc(){\r\n-            let qty = parseFloat(qtyInput.value) || 0;\r\n-            let price = parseFloat(priceInput.value) || 0;\r\n-            totalInput.value = (qty * price).toFixed(2);\r\n-            updateGrandTotal();\r\n-        }\r\n-        qtyInput.addEventListener(\"input\", recalc);\r\n-        priceInput.addEventListener(\"input\", recalc);\r\n-    }\r\n-}\r\n-\r\n-function updateRowNumbers(){\r\n-    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n-    Array.from(table.rows).forEach((row,index)=>{\r\n-        row.cells[0].textContent = index + 1;\r\n-    });\r\n-}\r\n-\r\n-function updateGrandTotal(){\r\n-    let total = 0;\r\n-    document.querySelectorAll(\".total\").forEach(input=>{\r\n-        total += parseFloat(input.value) || 0;\r\n-    });\r\n-    document.getElementById(\"grandTotalDisplay\").textContent = total.toFixed(2);\r\n-    document.getElementById(\"grand_total_input\").value = total.toFixed(2);\r\n-}\r\n-\r\n-// attach event ให้แถวเริ่มต้น\r\n-document.querySelectorAll(\"#itemsTable tbody tr\").forEach(attachEvents);\r\n-\r\n-document.querySelector(\".add-item-only\").addEventListener(\"click\", function() {\r\n-    let table = document.getElementById(\"itemsTable\").querySelector(\"tbody\");\r\n-\r\n-    // เพิ่มแถวใหม่สำหรับข้อมูลสินค้า\r\n     let newRow = table.insertRow();\r\n+    newRow.setAttribute(\"data-percent\", percent); // เก็บค่าเปอร์เซ็นต์\r\n     newRow.innerHTML = `\r\n-        <td></td> <!-- ลำดับเว้นว่าง -->\r\n-        <td><input type=\"text\" name=\"item_name[]\" placeholder=\"กรอกข้อมูลสินค้า\"></td>\r\n-        <td></td>\r\n-        <td></td>\r\n-        <td></td>\r\n-        <td></td>\r\n-        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n-    `;\r\n-\r\n-    // เพิ่ม event ให้ปุ่มลบ\r\n-    newRow.querySelector(\".remove-btn\").addEventListener(\"click\", function() {\r\n-        newRow.remove();\r\n-        updateGrandTotal(); // ถ้ามีฟังก์ชันอัปเดตรวม\r\n-    });\r\n-});\r\n-\r\n-\r\n-// เพิ่มแถวสินค้า\r\n-document.querySelector(\".add-btn\").addEventListener(\"click\", function(){\r\n-    let table = document.getElementById(\"itemsTable\").getElementsByTagName(\"tbody\")[0];\r\n-    let rowCount = table.rows.length;\r\n-    let row = table.insertRow();\r\n-    row.innerHTML = `\r\n-        <td>${rowCount+1}</td>\r\n-        <td><input type=\"text\" name=\"item_name[]\"></td>\r\n+        <td>${rowCount}</td>\r\n+        <td><input type=\"text\" name=\"item_name[]\" class=\"item-name\" placeholder=\"กรอกชื่อสินค้า\"></td>\r\n         <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n         <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n         <td><input type=\"text\" name=\"unit[]\"></td>\r\n         <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n@@ -309,22 +257,20 @@\n     `;\r\n });\r\n \r\n // ลบแถวสินค้า\r\n-document.getElementById(\"itemsTable\").addEventListener(\"click\", function(e){\r\n+document.querySelector(\"#itemsTable\").addEventListener(\"click\", function(e){\r\n     if(e.target.classList.contains(\"remove-btn\")){\r\n         let row = e.target.closest(\"tr\");\r\n         row.parentNode.removeChild(row);\r\n+        updateRowNumbers();\r\n         calculateTotals();\r\n-        let rows = document.querySelectorAll(\"#itemsTable tbody tr\");\r\n-        rows.forEach((r, i) => r.cells[0].innerText = i+1);\r\n     }\r\n });\r\n \r\n // ปุ่มพิมพ์ PDF\r\n function printPDF() {\r\n-  window.print();\r\n+    window.print();\r\n }\r\n-\r\n\\ No newline at end of file\n </script>\r\n </body>\r\n-</html>\n+</html>\r\n"
                }
            ],
            "date": 1758446662879,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n<html lang=\"th\">\r\n<head>\r\n<meta charset=\"UTF-8\">\r\n<title>ใบเสนอราคา</title>\r\n\r\n<!-- Site Icons -->\r\n<link rel=\"shortcut icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n<link rel=\"icon\" href=\"pic/mylogo.png\" type=\"image/x-icon\" />\r\n<link rel=\"apple-touch-icon\" href=\"pic/mylogo.png\" />\r\n<link href=\"css/bid.css\" rel=\"stylesheet\">\r\n\r\n</head>\r\n<body>\r\n<div class=\"container\" id=\"receiptContent\">\r\n\r\n    <!-- ส่วนหัว -->\r\n    <div class=\"header-info\">\r\n        <div class=\"company\">\r\n            <h2>ร้านเลิศชัยไอที</h2>\r\n            <p>222 หมู่ 14 ตำบลดงลิง อำเภอกมลาไสย จังหวัดกาฬสินธุ์ 46130</p>\r\n            <p>โทร. 082-1053870</p>\r\n            <p>gลขประจำตัวผู้เสียภาษีอากร  1460300026921</p>\r\n            <p>ทะเบียนการค้าเลขที่ 4651552000789</p>\r\n        </div>\r\n        <div class=\"logo\">\r\n            <img src=\"./pic/mylogo.png\" alt=\"logo\">\r\n        </div>\r\n    </div>\r\n\r\n    <!-- ฟอร์ม -->\r\n    <form action=\"http://localhost/shop/ยังไม่มี.php\" method=\"post\" id=\"receiptForm\">\r\n\r\n        <div class=\"doc-title\">\r\n            <h2>ใบเสนอราคา (QUATATION)</h2>\r\n            <div class=\"doc-info\">\r\n                <label>เลขที่ / NO. : <input type=\"text\" name=\"order_no\" required></label>\r\n                <span><b>วันที่ / Date :</b> ............................................</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"customer-info\">\r\n            <label>เรื่อง : <input type=\"text\" name=\"customer_name\" required></label><br>\r\n            <label>เรียน : <textarea name=\"customer_address\" rows=\"2\" required></textarea></label>\r\n        </div>\r\n\r\n        <br>\r\n        <h3>รายละเอียดสินค้า</h3>\r\n        <table id=\"itemsTable\">\r\n            <thead>\r\n                <tr>\r\n                    <th>ลำดับ</th>\r\n                    <th>รายการ</th>\r\n                    <th>จำนวน</th>\r\n                    <th>ราคา</th>\r\n                    <th>หน่วย</th>\r\n                    <th>ราคารวม</th>\r\n                    <th>ลบ</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td>1</td>\r\n                    <td><input type=\"text\" name=\"item_name[]\"></td>\r\n                    <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n                    <td><input type=\"number\" name=\"price[]\" class=\"price\"> </td>\r\n                    <td><input type=\"text\" name=\"unit[]\"></td>\r\n                    <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n                    <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n                </tr>\r\n            </tbody>\r\n            <tfoot>\r\n                <!-- รวมเป็นเงินทั้งสิ้น -->\r\n                 <tr>\r\n                    <td colspan=\"5\" style=\"text-align:center;font-weight:bold;\">รวมเป็นเงินทั้งสิ้น</td>\r\n                    <td style=\"text-align:right;font-weight:bold;\">\r\n                        <span id=\"grandTotalDisplay\">0.00</span>\r\n                    </td>\r\n                    <td></td>\r\n                </tr>\r\n                <!-- ตัวอักษร -->\r\n                 <tr>\r\n                    <td colspan=\"7\" style=\"text-align:left;font-weight:bold;\">\r\n                        (ตัวอักษร: <span id=\"thaiTextDisplay\">ศูนย์บาทถ้วน</span>)\r\n                    </td>\r\n                </tr>\r\n            </tfoot>\r\n        </table>\r\n\r\n        <input type=\"hidden\" name=\"grand_total\" id=\"grand_total_input\">\r\n\r\n        <button type=\"button\" class=\"add-btn\">+</button>\r\n        <button type=\"button\" class=\"button btn-back\" onclick=\"window.location.href='index.html'\">ย้อนกลับ</button>\r\n        <button type=\"submit\" class=\"button btn-save\">บันทึกใบเสร็จ</button>\r\n        <button type=\"button\" class=\"button btn-print\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n    </form>\r\n\r\n\r\n    <div class=\"signature\">\r\n        <br>\r\n        <p>(..............................................................)<br>( นายเลิศชัย อุดมพันธุ์ )<br>ผู้เสนอราคา</p>\r\n    </div>\r\n</div>\r\n\r\n<script>\r\n// แปลงตัวเลขเป็นภาษาไทย\r\nfunction numberToThaiText(number) {\r\n    const txtnum = [\"ศูนย์\",\"หนึ่ง\",\"สอง\",\"สาม\",\"สี่\",\"ห้า\",\"หก\",\"เจ็ด\",\"แปด\",\"เก้า\"];\r\n    const txtdigit = [\"\",\"สิบ\",\"ร้อย\",\"พัน\",\"หมื่น\",\"แสน\",\"ล้าน\"];\r\n    if(number === 0) return \"ศูนย์บาทถ้วน\";\r\n    let bahtText = \"\";\r\n    let numStr = number.toFixed(2).toString();\r\n    let [intPart, decPart] = numStr.split(\".\");\r\n    let intLen = intPart.length;\r\n\r\n    for(let i=0; i<intLen; i++){\r\n        let n = parseInt(intPart.charAt(i));\r\n        let pos = intLen - i - 1;\r\n        if(n!==0){\r\n            if(pos==1 && n==1) bahtText += \"สิบ\";\r\n            else if(pos==1 && n==2) bahtText += \"ยี่สิบ\";\r\n            else if(pos==0 && n==1 && intLen>1) bahtText += \"เอ็ด\";\r\n            else bahtText += txtnum[n] + (pos>0?txtdigit[pos]:\"\");\r\n        }\r\n    }\r\n    bahtText += \"บาท\";\r\n    if(decPart==\"00\") bahtText += \"ถ้วน\";\r\n    else {\r\n        let d1 = parseInt(decPart.charAt(0));\r\n        let d2 = parseInt(decPart.charAt(1));\r\n        if(d1!=0){\r\n            if(d1==1) bahtText += \"สิบ\";\r\n            else if(d1==2) bahtText += \"ยี่สิบ\";\r\n            else bahtText += txtnum[d1]+\"สิบ\";\r\n        }\r\n        if(d2!=0){\r\n            if(d2==1) bahtText += \"เอ็ดสตางค์\";\r\n            else bahtText += txtnum[d2]+\"สตางค์\";\r\n        }\r\n    }\r\n    return bahtText;\r\n}\r\n\r\n// คำนวณราคารวม\r\nfunction calculateTotals() {\r\n    let qtys = document.querySelectorAll(\".qty\");\r\n    let prices = document.querySelectorAll(\".price\");\r\n    let totals = document.querySelectorAll(\".total\");\r\n    let grandTotal = 0;\r\n\r\n    qtys.forEach((qty, i) => {\r\n        let q = parseFloat(qty.value) || 0;\r\n        let p = parseFloat(prices[i].value) || 0;\r\n        let sum = q * p;\r\n        totals[i].value = sum.toFixed(2);\r\n        grandTotal += sum;\r\n    });\r\n\r\n    // แสดงผลรวม\r\n    document.getElementById(\"grandTotalDisplay\").innerText = grandTotal.toFixed(2);\r\n    document.getElementById(\"grand_total_input\").value = grandTotal.toFixed(2);\r\n\r\n    // แสดงตัวอักษร\r\n    document.getElementById(\"thaiTextDisplay\").innerText = numberToThaiText(grandTotal);\r\n}\r\n\r\n// event คำนวณอัตโนมัติ\r\ndocument.addEventListener(\"input\", function(e){\r\n    if(e.target.classList.contains(\"qty\") || e.target.classList.contains(\"price\")){\r\n        calculateTotals();\r\n    }\r\n});\r\n\r\n// เพิ่มแถวสินค้า\r\ndocument.querySelector(\".add-btn\").addEventListener(\"click\", function(){\r\n    let table = document.getElementById(\"itemsTable\").getElementsByTagName(\"tbody\")[0];\r\n    let rowCount = table.rows.length;\r\n    let row = table.insertRow();\r\n    row.innerHTML = `\r\n        <td>${rowCount+1}</td>\r\n        <td><input type=\"text\" name=\"item_name[]\"></td>\r\n        <td><input type=\"number\" name=\"qty[]\" class=\"qty\"></td>\r\n        <td><input type=\"number\" name=\"price[]\" class=\"price\"></td>\r\n        <td><input type=\"text\" name=\"unit[]\"></td>\r\n        <td><input type=\"text\" name=\"total[]\" class=\"total\" readonly></td>\r\n        <td><button type=\"button\" class=\"remove-btn\">-</button></td>\r\n    `;\r\n});\r\n\r\n// ลบแถวสินค้า\r\ndocument.getElementById(\"itemsTable\").addEventListener(\"click\", function(e){\r\n    if(e.target.classList.contains(\"remove-btn\")){\r\n        let row = e.target.closest(\"tr\");\r\n        row.parentNode.removeChild(row);\r\n        calculateTotals();\r\n        let rows = document.querySelectorAll(\"#itemsTable tbody tr\");\r\n        rows.forEach((r, i) => r.cells[0].innerText = i+1);\r\n    }\r\n});\r\n\r\n// ปุ่มพิมพ์ PDF\r\nfunction printPDF() {\r\n  window.print();\r\n}\r\n\r\n</script>\r\n</body>\r\n</html>\r\n"
        }
    ]
}