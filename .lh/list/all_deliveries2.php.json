{
    "sourceFile": "list/all_deliveries2.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 7,
            "patches": [
                {
                    "date": 1758552331987,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1758552344953,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -199,9 +199,9 @@\n </style>\r\n </head>\r\n <body>\r\n <div class=\"sidebar\">\r\n-    <a href=\"http://localhost/shop/list/all_quotations1.php\">ใบเสนอราคา</a>\r\n+    <a href=\"http://localhost/shop/list/all_quotations2.php\">ใบเสนอราคา</a>\r\n     <a href=\"http://localhost/shop/list/all_deliveries1.php\">ใบส่งของ</a>\r\n     <a href=\"http://localhost/shop/list/all_receipts1.php\">ใบเสร็จรับเงิน</a>\r\n </div>\r\n \r\n"
                },
                {
                    "date": 1758552350417,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -200,10 +200,10 @@\n </head>\r\n <body>\r\n <div class=\"sidebar\">\r\n     <a href=\"http://localhost/shop/list/all_quotations2.php\">ใบเสนอราคา</a>\r\n-    <a href=\"http://localhost/shop/list/all_deliveries1.php\">ใบส่งของ</a>\r\n-    <a href=\"http://localhost/shop/list/all_receipts1.php\">ใบเสร็จรับเงิน</a>\r\n+    <a href=\"http://localhost/shop/list/all_deliveries2.php\">ใบส่งของ</a>\r\n+    <a href=\"http://localhost/shop/list/all_receipts2.php\">ใบเสร็จรับเงิน</a>\r\n </div>\r\n \r\n <div class=\"content\">\r\n     <div class=\"topbar\">\r\n"
                },
                {
                    "date": 1758552373918,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -206,9 +206,9 @@\n </div>\r\n \r\n <div class=\"content\">\r\n     <div class=\"topbar\">\r\n-        <img src=\"../pic/logo.png\" alt=\"LOGO\">\r\n+        <img src=\"../pic/mlogo.png\" alt=\"LOGO\">\r\n     </div>\r\n \r\n     <h2>รายการใบส่งของ</h2>\r\n \r\n"
                },
                {
                    "date": 1758552384688,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n <?php\r\n $host = \"localhost\";\r\n $user = \"root\";\r\n $pass = \"\";\r\n-$dbname = \"shop_it\";\r\n+$dbname = \"shop_it2\";\r\n \r\n // เชื่อมต่อฐานข้อมูล\r\n $conn = new mysqli($host, $user, $pass, $dbname);\r\n if ($conn->connect_error) {\r\n@@ -206,9 +206,9 @@\n </div>\r\n \r\n <div class=\"content\">\r\n     <div class=\"topbar\">\r\n-        <img src=\"../pic/mlogo.png\" alt=\"LOGO\">\r\n+        <img src=\"../pic/mylogo.png\" alt=\"LOGO\">\r\n     </div>\r\n \r\n     <h2>รายการใบส่งของ</h2>\r\n \r\n"
                },
                {
                    "date": 1758552761179,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -257,9 +257,14 @@\n             ?>\r\n         </tbody>\r\n     </table>\r\n \r\n+    <div style=\"margin-top: 20px; display: flex; gap: 10px;\">\r\n     <button class=\"btn-pdf\" onclick=\"window.print()\">พิมพ์ PDF</button>\r\n+    <button style=\"padding: 10px 10px; background:#b89172; color:#fff; border:none; border-radius:6px; cursor:pointer; font-weight:bold;\"\r\n+            onclick=\"window.location.href='../index.html'\">\r\n+        กลับหน้าหลัก\r\n+    </button>\r\n </div>\r\n \r\n <script>\r\n // ฟังก์ชันค้นหา (client side)\r\n"
                },
                {
                    "date": 1758552769387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -263,9 +263,8 @@\n     <button style=\"padding: 10px 10px; background:#b89172; color:#fff; border:none; border-radius:6px; cursor:pointer; font-weight:bold;\"\r\n             onclick=\"window.location.href='../index.html'\">\r\n         กลับหน้าหลัก\r\n     </button>\r\n-    </div>\r\n </div>\r\n \r\n <script>\r\n // ฟังก์ชันค้นหา (client side)\r\n"
                },
                {
                    "date": 1758728471510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -441,5 +441,7 @@\n     });\r\n });\r\n </script>\r\n \r\n-</bo\n\\ No newline at end of file\n+</body>\r\n+</html>\r\n+<?php $conn->close(); ?>\n\\ No newline at end of file\n"
                }
            ],
            "date": 1758552331987,
            "name": "Commit-0",
            "content": "<?php\r\n$host = \"localhost\";\r\n$user = \"root\";\r\n$pass = \"\";\r\n$dbname = \"shop_it\";\r\n\r\n// เชื่อมต่อฐานข้อมูล\r\n$conn = new mysqli($host, $user, $pass, $dbname);\r\nif ($conn->connect_error) {\r\n    die(\"เชื่อมต่อฐานข้อมูลล้มเหลว: \" . $conn->connect_error);\r\n}\r\n\r\n// ดึงข้อมูลจากตาราง deliveries + delivery_items\r\n$sql = \"\r\n    SELECT \r\n        d.customer_name,\r\n        d.delivery_no,\r\n        i.item_name,\r\n        i.qty,\r\n        i.price,\r\n        i.unit,\r\n        i.total\r\n    FROM deliveries d\r\n    JOIN delivery_items i ON i.delivery_id = d.id\r\n    ORDER BY d.id, i.id\r\n\";\r\n$result = $conn->query($sql);\r\n?>\r\n\r\n\r\n<!DOCTYPE html>\r\n<html lang=\"th\">\r\n<head>\r\n<meta charset=\"UTF-8\">\r\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n<title>ใบส่งของ</title>\r\n\r\n<style>\r\nbody {\r\n    margin: 0;\r\n    font-family: Tahoma, sans-serif;\r\n    background: #f9f9ef;\r\n}\r\n\r\n/* Sidebar */\r\n.sidebar {\r\n    width: 220px;\r\n    height: 100vh;\r\n    background: #b89172;\r\n    float: left;\r\n    color: #fff;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    padding-top: 30px;\r\n}\r\n.sidebar a {\r\n    color: #fff;\r\n    text-decoration: none;\r\n    margin: 15px 0;\r\n    display: block;\r\n    width: 100%;\r\n    text-align: center;\r\n    transition: background 0.3s;\r\n}\r\n.sidebar a:hover {\r\n    background: rgba(255,255,255,0.2);\r\n    border-radius: 6px;\r\n}\r\n\r\n/* Content */\r\n.content {\r\n    margin-left: 220px;\r\n    padding: 20px;\r\n}\r\n\r\n/* Topbar */\r\n.topbar {\r\n    background: #d4b295;\r\n    padding: 15px 0;\r\n    text-align: center;\r\n    margin-bottom: 25px;\r\n    box-sizing: border-box;\r\n    border-radius: 6px 6px 0 0;\r\n    box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n}\r\n.topbar img {\r\n    max-height: 60px;\r\n    display: block;\r\n    margin: 0 auto;\r\n}\r\n\r\n/* Headline */\r\nh2 {\r\n    margin: 20px 0;\r\n    font-weight: 600;\r\n    color: #4d3a2c;\r\n}\r\n\r\n/* Table */\r\ntable {\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n    border-radius: 6px;\r\n    overflow: hidden;\r\n    box-shadow: 0 2px 5px rgba(0,0,0,0.05);\r\n}\r\nth, td {\r\n    border: 1px solid #ccc;\r\n    padding: 10px;\r\n    text-align: center;\r\n    transition: background 0.3s;\r\n}\r\nth {\r\n    background: #e5c3a6;\r\n    font-weight: 600;\r\n}\r\ntr:nth-child(even) {\r\n    background: #fdf5ef;\r\n}\r\ntr:hover {\r\n    background: #ffe8d0;\r\n}\r\n\r\n/* Search box */\r\n.search-box {\r\n    margin: 10px 0 15px;\r\n}\r\ninput, select {\r\n    padding: 8px;\r\n    border: 1px solid #ccc;\r\n    border-radius: 4px;\r\n    outline: none;\r\n}\r\ninput:focus, select:focus {\r\n    border-color: #b89172;\r\n}\r\n\r\n/* PDF button */\r\n.btn-pdf {\r\n    margin-top: 20px;\r\n    background: #f77c7c;\r\n    color: #000;\r\n    padding: 10px 25px;\r\n    border: none;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n    transition: background 0.3s;\r\n}\r\n.btn-pdf:hover {\r\n    background: #f55c5c;\r\n}\r\n\r\n/* Print PDF */\r\n@media print {\r\n    @page {\r\n        size: A5 portrait;\r\n        margin: 5mm;  /* กระชับขอบทุกด้าน */\r\n    }\r\n\r\n    body {\r\n        background: #fff;\r\n        margin: 0;\r\n        font-size: 12pt;\r\n    }\r\n\r\n    .sidebar,\r\n    .search-box,\r\n    .btn-pdf{\r\n        display: none !important;\r\n    }\r\n\r\n    .content {\r\n        margin: 0;\r\n        padding: 0;\r\n    }\r\n\r\n    table {\r\n        border-collapse: collapse;\r\n        width: 100%;\r\n        border: 2px solid #000;  /* ขอบชัดทุกด้าน */\r\n        margin: 0;\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    th, td {\r\n        border: 1px solid #000;  /* เส้นชัด */\r\n        padding: 6px;\r\n        text-align: center;\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    tr:nth-child(even) {\r\n        background: #fdf5ef;\r\n    }\r\n}\r\n\r\n</style>\r\n</head>\r\n<body>\r\n<div class=\"sidebar\">\r\n    <a href=\"http://localhost/shop/list/all_quotations1.php\">ใบเสนอราคา</a>\r\n    <a href=\"http://localhost/shop/list/all_deliveries1.php\">ใบส่งของ</a>\r\n    <a href=\"http://localhost/shop/list/all_receipts1.php\">ใบเสร็จรับเงิน</a>\r\n</div>\r\n\r\n<div class=\"content\">\r\n    <div class=\"topbar\">\r\n        <img src=\"../pic/logo.png\" alt=\"LOGO\">\r\n    </div>\r\n\r\n    <h2>รายการใบส่งของ</h2>\r\n\r\n    <div class=\"search-box\">\r\n        <label for=\"searchColumn\">ค้นหาโดย: </label>\r\n        <select id=\"searchColumn\">\r\n            <option value=\"1\">ชื่อลูกค้า</option>\r\n            <option value=\"2\">เลขที่ / NO.</option>\r\n            <option value=\"3\">รายการสินค้า</option>\r\n        </select>\r\n        <input type=\"text\" id=\"searchInput\" placeholder=\"พิมพ์คำค้นหา...\">\r\n    </div>\r\n\r\n    <table id=\"deliveryTable\">\r\n        <thead>\r\n            <tr>\r\n                <th>ลำดับ</th>\r\n                <th>ชื่อลูกค้า</th>\r\n                <th>เลขที่ / NO.</th>\r\n                <th>รายการ</th>\r\n                <th>จำนวน</th>\r\n                <th>ราคา</th>\r\n                <th>หน่วย</th>\r\n                <th>ราคารวม</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <?php\r\n            $no = 1;\r\n            if ($result->num_rows > 0) {\r\n                while($row = $result->fetch_assoc()) {\r\n                    echo \"<tr>\";\r\n                    echo \"<td>\" . $no++ . \"</td>\";\r\n                    echo \"<td>\" . htmlspecialchars($row['customer_name']) . \"</td>\";\r\n                    echo \"<td>\" . htmlspecialchars($row['delivery_no']) . \"</td>\";\r\n                    echo \"<td>\" . htmlspecialchars($row['item_name']) . \"</td>\";\r\n                    echo \"<td>\" . $row['qty'] . \"</td>\";\r\n                    echo \"<td>\" . number_format($row['price'],2) . \"</td>\";\r\n                    echo \"<td>\" . htmlspecialchars($row['unit']) . \"</td>\";\r\n                    echo \"<td>\" . number_format($row['total'],2) . \"</td>\";\r\n                    echo \"</tr>\";\r\n                }\r\n            } else {\r\n                echo \"<tr><td colspan='8'>ยังไม่มีข้อมูล</td></tr>\";\r\n            }\r\n            ?>\r\n        </tbody>\r\n    </table>\r\n\r\n    <button class=\"btn-pdf\" onclick=\"window.print()\">พิมพ์ PDF</button>\r\n</div>\r\n\r\n<script>\r\n// ฟังก์ชันค้นหา (client side)\r\ndocument.getElementById(\"searchInput\").addEventListener(\"keyup\", function() {\r\n    let input = this.value.toLowerCase();\r\n    let table = document.getElementById(\"deliveryTable\");\r\n    let rows = table.getElementsByTagName(\"tr\");\r\n    let column = parseInt(document.getElementById(\"searchColumn\").value);\r\n\r\n    for (let i = 1; i < rows.length; i++) {\r\n        let cell = rows[i].getElementsByTagName(\"td\")[column];\r\n        if (cell) {\r\n            let text = cell.textContent.toLowerCase();\r\n            rows[i].style.display = text.includes(input) ? \"\" : \"none\";\r\n        }\r\n    }\r\n});\r\n</script>\r\n\r\n</body>\r\n</html>\r\n<?php $conn->close(); ?>\r\n"
        }
    ]
}