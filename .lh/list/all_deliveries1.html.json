{
    "sourceFile": "list/all_deliveries1.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 15,
            "patches": [
                {
                    "date": 1758466424574,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1758466430642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,11 @@\n-1\n\\ No newline at end of file\n+<!DOCTYPE html>\r\n+<html lang=\"en\">\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n+    <title>Document</title>\r\n+</head>\r\n+<body>\r\n+    \r\n+</body>\r\n+</html>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1758466457077,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n <html lang=\"en\">\r\n <head>\r\n     <meta charset=\"UTF-8\">\r\n     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n-    <title>Document</title>\r\n+    <title>ใบส่งของ</title>\r\n </head>\r\n <body>\r\n     \r\n </body>\r\n"
                },
                {
                    "date": 1758547499406,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,126 @@\n <!DOCTYPE html>\r\n-<html lang=\"en\">\r\n+<html lang=\"th\">\r\n <head>\r\n-    <meta charset=\"UTF-8\">\r\n-    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n-    <title>ใบส่งของ</title>\r\n+  <meta charset=\"UTF-8\">\r\n+  <title>ใบส่งของ</title>\r\n+  <style>\r\n+    body { margin:0; font-family: Tahoma, sans-serif; background:#f9f9ef; }\r\n\\ No newline at end of file\n+    .sidebar {\r\n+      width: 220px; height:100vh; background:#b89172; float:left; color:#fff;\r\n+      display:flex; flex-direction:column; align-items:center; padding-top:30px;\r\n+    }\r\n+    .sidebar a {\r\n+      color:#fff; text-decoration:none; margin:15px 0; display:block; width:100%; text-align:center;\r\n+    }\r\n+    .content { margin-left:220px; padding:20px; }\r\n+    .topbar {\r\n+      background:#d4b295; padding:10px; text-align:center;\r\n+    }\r\n+    h2 { margin:20px 0; }\r\n+    table { width:100%; border-collapse:collapse; }\r\n+    th, td { border:1px solid #ccc; padding:8px; text-align:center; }\r\n+    th { background:#e5c3a6; }\r\n+    tr:nth-child(even){background:#fdf5ef;}\r\n+    .search-box { margin:10px 0; }\r\n+    input, select { padding:6px; }\r\n+    .btn-pdf {\r\n+      margin-top:20px; background:#f77c7c; color:#000; padding:10px 20px;\r\n+      border:none; border-radius:6px; cursor:pointer; font-weight:bold;\r\n+    }\r\n+  </style>\r\n </head>\r\n <body>\r\n-    \r\n+\r\n+<div class=\"sidebar\">\r\n+  <a href=\"#\">ใบเสนอราคา</a>\r\n+  <a href=\"#\">ใบสั่งของ</a>\r\n+  <a href=\"#\">ใบเสร็จรับเงิน</a>\r\n+</div>\r\n+\r\n+<div class=\"content\">\r\n+  <div class=\"topbar\">\r\n+    <img src=\"logo.png\" alt=\"LOGO\" height=\"60\">\r\n+  </div>\r\n+\r\n+  <h2>รายการใบส่งของ</h2>\r\n+\r\n+  <div class=\"search-box\">\r\n+    <label for=\"searchColumn\">ค้นหาโดย: </label>\r\n+    <select id=\"searchColumn\">\r\n+      <option value=\"customer_name\">ชื่อลูกค้า</option>\r\n+      <option value=\"delivery_no\">เลขที่ / NO.</option>\r\n+      <option value=\"item_name\">สินค้า</option>\r\n+    </select>\r\n+    <input type=\"text\" id=\"searchInput\" placeholder=\"พิมพ์คำค้นหา...\">\r\n+  </div>\r\n+\r\n+  <table id=\"deliveryTable\">\r\n+    <thead>\r\n+      <tr>\r\n+        <th>ลำดับ</th>\r\n+        <th>ชื่อลูกค้า</th>\r\n+        <th>เลขที่ / NO.</th>\r\n+        <th>สินค้า</th>\r\n+        <th>จำนวน</th>\r\n+        <th>ราคา</th>\r\n+        <th>หน่วย</th>\r\n+        <th>ราคารวม</th>\r\n+      </tr>\r\n+    </thead>\r\n+    <tbody></tbody>\r\n+  </table>\r\n+\r\n+  <button class=\"btn-pdf\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n+</div>\r\n+\r\n+<script>\r\n+// โหลดข้อมูลจาก PHP\r\n+async function loadData() {\r\n+  let res = await fetch(\"http://localhost/shop/list/all_deliveries1.php\");\r\n+  let data = await res.json();\r\n+  let tbody = document.querySelector(\"#deliveryTable tbody\");\r\n+  tbody.innerHTML = \"\";\r\n+\r\n+  if (data.length === 0) {\r\n+    tbody.innerHTML = \"<tr><td colspan='8'>ไม่มีข้อมูล</td></tr>\";\r\n+    return;\r\n+  }\r\n+\r\n+  data.forEach((row, idx) => {\r\n+    let tr = document.createElement(\"tr\");\r\n+    tr.innerHTML = `\r\n+      <td>${idx+1}</td>\r\n+      <td>${row.customer_name}</td>\r\n+      <td>${row.delivery_no}</td>\r\n+      <td>${row.item_name}</td>\r\n+      <td>${row.qty}</td>\r\n+      <td>${parseFloat(row.price).toFixed(2)}</td>\r\n+      <td>${row.unit}</td>\r\n+      <td>${parseFloat(row.total).toFixed(2)}</td>\r\n+    `;\r\n+    tbody.appendChild(tr);\r\n+  });\r\n+}\r\n+\r\n+// ค้นหา\r\n+document.getElementById(\"searchInput\").addEventListener(\"keyup\", function(){\r\n+  let input = this.value.toLowerCase();\r\n+  let column = document.getElementById(\"searchColumn\").value;\r\n+  let rows = document.querySelectorAll(\"#deliveryTable tbody tr\");\r\n+\r\n+  rows.forEach(r=>{\r\n+    let cellText = r.querySelector(\"td:nth-child(\" + (column===\"customer_name\"?2: column===\"delivery_no\"?3:4) + \")\").innerText.toLowerCase();\r\n+    r.style.display = cellText.includes(input) ? \"\" : \"none\";\r\n+  });\r\n+});\r\n+\r\n+// พิมพ์ PDF\r\n+function printPDF(){\r\n+  window.print();\r\n+}\r\n+\r\n+loadData();\r\n+</script>\r\n+\r\n </body>\r\n-</html>\n+</html>\r\n"
                },
                {
                    "date": 1758547664016,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n </div>\r\n \r\n <div class=\"content\">\r\n   <div class=\"topbar\">\r\n-    <img src=\"logo.png\" alt=\"LOGO\" height=\"60\">\r\n+    <img src=\"\" alt=\"LOGO\" height=\"60\">\r\n   </div>\r\n \r\n   <h2>รายการใบส่งของ</h2>\r\n \r\n@@ -122,5 +122,5 @@\n loadData();\r\n </script>\r\n \r\n </body>\r\n-</html>\n\\ No newline at end of file\n+</html>\r\n"
                },
                {
                    "date": 1758547673674,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n </div>\r\n \r\n <div class=\"content\">\r\n   <div class=\"topbar\">\r\n-    <img src=\"\" alt=\"LOGO\" height=\"60\">\r\n+    <img src=\"./pic/logo.png\" alt=\"LOGO\" height=\"60\">\r\n   </div>\r\n \r\n   <h2>รายการใบส่งของ</h2>\r\n \r\n"
                },
                {
                    "date": 1758547680053,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n </div>\r\n \r\n <div class=\"content\">\r\n   <div class=\"topbar\">\r\n-    <img src=\"./pic/logo.png\" alt=\"LOGO\" height=\"60\">\r\n+    <img src=\"../pic/logo.png\" alt=\"LOGO\" height=\"60\">\r\n   </div>\r\n \r\n   <h2>รายการใบส่งของ</h2>\r\n \r\n"
                },
                {
                    "date": 1758548334171,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,120 +1,157 @@\n <!DOCTYPE html>\r\n <html lang=\"th\">\r\n <head>\r\n   <meta charset=\"UTF-8\">\r\n-  <title>ใบส่งของ</title>\r\n+  <title>รายการส่งของ</title>\r\n   <style>\r\n-    body { margin:0; font-family: Tahoma, sans-serif; background:#f9f9ef; }\r\n-    .sidebar {\r\n-      width: 220px; height:100vh; background:#b89172; float:left; color:#fff;\r\n-      display:flex; flex-direction:column; align-items:center; padding-top:30px;\r\n+    body {\r\n+      font-family: \"TH Sarabun New\", sans-serif;\r\n+      margin: 20px;\r\n+      background: #f9f9f9;\r\n     }\r\n-    .sidebar a {\r\n-      color:#fff; text-decoration:none; margin:15px 0; display:block; width:100%; text-align:center;\r\n+    h2 {\r\n+      text-align: center;\r\n+      margin-bottom: 10px;\r\n     }\r\n-    .content { margin-left:220px; padding:20px; }\r\n-    .topbar {\r\n-      background:#d4b295; padding:10px; text-align:center;\r\n+    .toolbar {\r\n+      display: flex;\r\n+      justify-content: space-between;\r\n+      margin-bottom: 15px;\r\n+      flex-wrap: wrap;\r\n+      gap: 10px;\r\n     }\r\n-    h2 { margin:20px 0; }\r\n-    table { width:100%; border-collapse:collapse; }\r\n-    th, td { border:1px solid #ccc; padding:8px; text-align:center; }\r\n-    th { background:#e5c3a6; }\r\n-    tr:nth-child(even){background:#fdf5ef;}\r\n-    .search-box { margin:10px 0; }\r\n-    input, select { padding:6px; }\r\n+    .toolbar input, .toolbar button {\r\n+      padding: 6px 10px;\r\n+      font-size: 16px;\r\n+    }\r\n+    table {\r\n+      width: 100%;\r\n+      border-collapse: collapse;\r\n+      background: #fff;\r\n+      box-shadow: 0 2px 6px rgba(0,0,0,0.1);\r\n+    }\r\n+    table thead {\r\n+      background: #007BFF;\r\n+      color: #fff;\r\n+    }\r\n+    table th, table td {\r\n+      border: 1px solid #ddd;\r\n+      padding: 8px;\r\n+      text-align: center;\r\n+    }\r\n+    table tr:nth-child(even) {\r\n+      background: #f2f2f2;\r\n+    }\r\n+    table tfoot {\r\n+      font-weight: bold;\r\n+      background: #f1f1f1;\r\n+    }\r\n     .btn-pdf {\r\n-      margin-top:20px; background:#f77c7c; color:#000; padding:10px 20px;\r\n-      border:none; border-radius:6px; cursor:pointer; font-weight:bold;\r\n+      background: #28a745;\r\n+      color: #fff;\r\n+      border: none;\r\n+      cursor: pointer;\r\n     }\r\n+    .btn-pdf:hover {\r\n+      background: #218838;\r\n+    }\r\n   </style>\r\n </head>\r\n <body>\r\n \r\n-<div class=\"sidebar\">\r\n-  <a href=\"#\">ใบเสนอราคา</a>\r\n-  <a href=\"#\">ใบสั่งของ</a>\r\n-  <a href=\"#\">ใบเสร็จรับเงิน</a>\r\n-</div>\r\n+  <h2>รายการส่งของ</h2>\r\n \r\n-<div class=\"content\">\r\n-  <div class=\"topbar\">\r\n-    <img src=\"../pic/logo.png\" alt=\"LOGO\" height=\"60\">\r\n+  <div class=\"toolbar\">\r\n+    <div>\r\n+      ค้นหา: <input type=\"text\" id=\"searchInput\" placeholder=\"พิมพ์คำค้น...\">\r\n+      วันที่: <input type=\"date\"> ถึง <input type=\"date\">\r\n+    </div>\r\n+    <div>\r\n+      <button class=\"btn-pdf\" onclick=\"window.print()\">พิมพ์ PDF</button>\r\n+    </div>\r\n   </div>\r\n \r\n-  <h2>รายการใบส่งของ</h2>\r\n-\r\n-  <div class=\"search-box\">\r\n-    <label for=\"searchColumn\">ค้นหาโดย: </label>\r\n-    <select id=\"searchColumn\">\r\n-      <option value=\"customer_name\">ชื่อลูกค้า</option>\r\n-      <option value=\"delivery_no\">เลขที่ / NO.</option>\r\n-      <option value=\"item_name\">สินค้า</option>\r\n-    </select>\r\n-    <input type=\"text\" id=\"searchInput\" placeholder=\"พิมพ์คำค้นหา...\">\r\n-  </div>\r\n-\r\n   <table id=\"deliveryTable\">\r\n     <thead>\r\n       <tr>\r\n         <th>ลำดับ</th>\r\n-        <th>ชื่อลูกค้า</th>\r\n-        <th>เลขที่ / NO.</th>\r\n+        <th>เลขที่ส่ง</th>\r\n+        <th>วันที่ส่ง</th>\r\n+        <th>ลูกค้า</th>\r\n         <th>สินค้า</th>\r\n         <th>จำนวน</th>\r\n         <th>ราคา</th>\r\n-        <th>หน่วย</th>\r\n-        <th>ราคารวม</th>\r\n+        <th>รวม</th>\r\n       </tr>\r\n     </thead>\r\n-    <tbody></tbody>\r\n+    <tbody>\r\n+      <tr><td colspan=\"8\">กำลังโหลดข้อมูล...</td></tr>\r\n+    </tbody>\r\n+    <tfoot>\r\n+      <tr>\r\n+        <td colspan=\"7\" style=\"text-align: right;\">รวมทั้งหมด</td>\r\n+        <td id=\"totalSum\">0</td>\r\n+      </tr>\r\n+    </tfoot>\r\n   </table>\r\n \r\n-  <button class=\"btn-pdf\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n-</div>\r\n+  <script>\r\n+    // ฟังก์ชันดึงข้อมูลจาก PHP\r\n+    async function loadDeliveries() {\r\n+      try {\r\n+        let res = await fetch(\"http://localhost/shop/list/all_deliveries1.php\");\r\n+        let data = await res.json();\r\n \r\n-<script>\r\n-// โหลดข้อมูลจาก PHP\r\n-async function loadData() {\r\n-  let res = await fetch(\"http://localhost/shop/list/all_deliveries1.php\");\r\n-  let data = await res.json();\r\n-  let tbody = document.querySelector(\"#deliveryTable tbody\");\r\n-  tbody.innerHTML = \"\";\r\n+        let tbody = document.querySelector(\"#deliveryTable tbody\");\r\n+        let totalSum = 0;\r\n \r\n-  if (data.length === 0) {\r\n-    tbody.innerHTML = \"<tr><td colspan='8'>ไม่มีข้อมูล</td></tr>\";\r\n-    return;\r\n-  }\r\n+        if (!data || data.length === 0) {\r\n+          tbody.innerHTML = `<tr><td colspan=\"8\">ไม่มีข้อมูล</td></tr>`;\r\n+          document.getElementById(\"totalSum\").textContent = \"0\";\r\n+          return;\r\n+        }\r\n \r\n-  data.forEach((row, idx) => {\r\n-    let tr = document.createElement(\"tr\");\r\n-    tr.innerHTML = `\r\n-      <td>${idx+1}</td>\r\n-      <td>${row.customer_name}</td>\r\n-      <td>${row.delivery_no}</td>\r\n-      <td>${row.item_name}</td>\r\n-      <td>${row.qty}</td>\r\n-      <td>${parseFloat(row.price).toFixed(2)}</td>\r\n-      <td>${row.unit}</td>\r\n-      <td>${parseFloat(row.total).toFixed(2)}</td>\r\n-    `;\r\n-    tbody.appendChild(tr);\r\n-  });\r\n-}\r\n+        tbody.innerHTML = \"\";\r\n+        data.forEach((item, index) => {\r\n+          let sum = parseFloat(item.qty) * parseFloat(item.price);\r\n+          totalSum += sum;\r\n+          tbody.innerHTML += `\r\n+            <tr>\r\n+              <td>${index + 1}</td>\r\n+              <td>${item.delivery_no || '-'}</td>\r\n+              <td>${item.delivery_date || '-'}</td>\r\n+              <td>${item.customer_name || '-'}</td>\r\n+              <td>${item.item_name || '-'}</td>\r\n+              <td>${item.qty || 0}</td>\r\n+              <td>${Number(item.price).toLocaleString()}</td>\r\n+              <td>${sum.toLocaleString()}</td>\r\n+            </tr>\r\n+          `;\r\n+        });\r\n \r\n-// ค้นหา\r\n-document.getElementById(\"searchInput\").addEventListener(\"keyup\", function(){\r\n-  let input = this.value.toLowerCase();\r\n-  let column = document.getElementById(\"searchColumn\").value;\r\n-  let rows = document.querySelectorAll(\"#deliveryTable tbody tr\");\r\n+        document.getElementById(\"totalSum\").textContent = totalSum.toLocaleString();\r\n \r\n-  rows.forEach(r=>{\r\n-    let cellText = r.querySelector(\"td:nth-child(\" + (column===\"customer_name\"?2: column===\"delivery_no\"?3:4) + \")\").innerText.toLowerCase();\r\n-    r.style.display = cellText.includes(input) ? \"\" : \"none\";\r\n-  });\r\n-});\r\n+      } catch (err) {\r\n+        console.error(\"โหลดข้อมูลผิดพลาด:\", err);\r\n+        document.querySelector(\"#deliveryTable tbody\").innerHTML =\r\n+          `<tr><td colspan=\"8\">เกิดข้อผิดพลาดในการโหลดข้อมูล</td></tr>`;\r\n+      }\r\n+    }\r\n \r\n+    // ฟังก์ชันค้นหา\r\n+    document.getElementById(\"searchInput\").addEventListener(\"keyup\", function() {\r\n+      let filter = this.value.toLowerCase();\r\n+      let rows = document.querySelectorAll(\"#deliveryTable tbody tr\");\r\n+      rows.forEach(row => {\r\n+        row.style.display = row.innerText.toLowerCase().includes(filter) ? \"\" : \"none\";\r\n+      });\r\n+    });\r\n+\r\n+    // โหลดข้อมูลทันทีเมื่อเปิดหน้า\r\n+    loadDeliveries();\r\n+  </script>\r\n+\r\n // พิมพ์ PDF\r\n function printPDF(){\r\n   window.print();\r\n }\r\n"
                },
                {
                    "date": 1758548341421,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -148,9 +148,8 @@\n     });\r\n \r\n     // โหลดข้อมูลทันทีเมื่อเปิดหน้า\r\n     loadDeliveries();\r\n-  </script>\r\n \r\n // พิมพ์ PDF\r\n function printPDF(){\r\n   window.print();\r\n"
                },
                {
                    "date": 1758548365218,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -149,8 +149,9 @@\n \r\n     // โหลดข้อมูลทันทีเมื่อเปิดหน้า\r\n     loadDeliveries();\r\n \r\n+\r\n // พิมพ์ PDF\r\n function printPDF(){\r\n   window.print();\r\n }\r\n"
                },
                {
                    "date": 1758548564660,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,157 +1,140 @@\n <!DOCTYPE html>\r\n <html lang=\"th\">\r\n <head>\r\n   <meta charset=\"UTF-8\">\r\n-  <title>รายการส่งของ</title>\r\n+  <title>ใบส่งของ</title>\r\n   <style>\r\n-    body {\r\n-      font-family: \"TH Sarabun New\", sans-serif;\r\n-      margin: 20px;\r\n-      background: #f9f9f9;\r\n+    body { margin:0; font-family: Tahoma, sans-serif; background:#f9f9ef; }\r\n+    .sidebar {\r\n+      width: 220px; height:100vh; background:#b89172; float:left; color:#fff;\r\n+      display:flex; flex-direction:column; align-items:center; padding-top:30px;\r\n     }\r\n-    h2 {\r\n-      text-align: center;\r\n-      margin-bottom: 10px;\r\n+    .sidebar a {\r\n+      color:#fff; text-decoration:none; margin:15px 0; display:block; width:100%; text-align:center;\r\n     }\r\n-    .toolbar {\r\n-      display: flex;\r\n-      justify-content: space-between;\r\n-      margin-bottom: 15px;\r\n-      flex-wrap: wrap;\r\n-      gap: 10px;\r\n+    .content { margin-left:220px; padding:20px; }\r\n+    .topbar {\r\n+      background:#d4b295; padding:10px; text-align:center;\r\n     }\r\n-    .toolbar input, .toolbar button {\r\n-      padding: 6px 10px;\r\n-      font-size: 16px;\r\n-    }\r\n-    table {\r\n-      width: 100%;\r\n-      border-collapse: collapse;\r\n-      background: #fff;\r\n-      box-shadow: 0 2px 6px rgba(0,0,0,0.1);\r\n-    }\r\n-    table thead {\r\n-      background: #007BFF;\r\n-      color: #fff;\r\n-    }\r\n-    table th, table td {\r\n-      border: 1px solid #ddd;\r\n-      padding: 8px;\r\n-      text-align: center;\r\n-    }\r\n-    table tr:nth-child(even) {\r\n-      background: #f2f2f2;\r\n-    }\r\n-    table tfoot {\r\n-      font-weight: bold;\r\n-      background: #f1f1f1;\r\n-    }\r\n+    h2 { margin:20px 0; }\r\n+    table { width:100%; border-collapse:collapse; }\r\n+    th, td { border:1px solid #ccc; padding:8px; text-align:center; }\r\n+    th { background:#e5c3a6; }\r\n+    tr:nth-child(even){background:#fdf5ef;}\r\n+    .search-box { margin:10px 0; }\r\n+    input, select { padding:6px; }\r\n     .btn-pdf {\r\n-      background: #28a745;\r\n-      color: #fff;\r\n-      border: none;\r\n-      cursor: pointer;\r\n+      margin-top:20px; background:#f77c7c; color:#000; padding:10px 20px;\r\n+      border:none; border-radius:6px; cursor:pointer; font-weight:bold;\r\n     }\r\n-    .btn-pdf:hover {\r\n-      background: #218838;\r\n-    }\r\n   </style>\r\n </head>\r\n <body>\r\n \r\n-  <h2>รายการส่งของ</h2>\r\n+<div class=\"sidebar\">\r\n+  <a href=\"#\">ใบเสนอราคา</a>\r\n+  <a href=\"#\">ใบสั่งของ</a>\r\n+  <a href=\"#\">ใบเสร็จรับเงิน</a>\r\n+</div>\r\n \r\n-  <div class=\"toolbar\">\r\n-    <div>\r\n-      ค้นหา: <input type=\"text\" id=\"searchInput\" placeholder=\"พิมพ์คำค้น...\">\r\n-      วันที่: <input type=\"date\"> ถึง <input type=\"date\">\r\n-    </div>\r\n-    <div>\r\n-      <button class=\"btn-pdf\" onclick=\"window.print()\">พิมพ์ PDF</button>\r\n-    </div>\r\n+<div class=\"content\">\r\n+  <div class=\"topbar\">\r\n+    <img src=\"../pic/logo.png\" alt=\"LOGO\" height=\"60\">\r\n   </div>\r\n \r\n-  <table id=\"deliveryTable\">\r\n+  <h2>รายการใบส่งของ</h2>\r\n+\r\n+  <div class=\"search-box\">\r\n+    <label for=\"searchColumn\">ค้นหาโดย: </label>\r\n+    <select id=\"searchColumn\">\r\n+        <option value=\"1\">ชื่อลูกค้า</option>\r\n+        <option value=\"2\">เลขที่ / NO.</option>\r\n+        <option value=\"3\">รายการสินค้า</option>\r\n+    </select>\r\n+    <input type=\"text\" id=\"searchInput\" placeholder=\"พิมพ์คำค้นหา...\">\r\n+</div>\r\n+\r\n+<table id=\"deliveryTable\">\r\n     <thead>\r\n-      <tr>\r\n-        <th>ลำดับ</th>\r\n-        <th>เลขที่ส่ง</th>\r\n-        <th>วันที่ส่ง</th>\r\n-        <th>ลูกค้า</th>\r\n-        <th>สินค้า</th>\r\n-        <th>จำนวน</th>\r\n-        <th>ราคา</th>\r\n-        <th>รวม</th>\r\n-      </tr>\r\n+        <tr>\r\n+            <th>ลำดับ</th>\r\n+            <th>ชื่อลูกค้า</th>\r\n+            <th>เลขที่ / NO.</th>\r\n+            <th>รายการ</th>\r\n+            <th>จำนวน</th>\r\n+            <th>ราคา</th>\r\n+            <th>หน่วย</th>\r\n+            <th>ราคารวม</th>\r\n+        </tr>\r\n     </thead>\r\n     <tbody>\r\n-      <tr><td colspan=\"8\">กำลังโหลดข้อมูล...</td></tr>\r\n+        <?php\r\n+        $no = 1;\r\n+        if ($result->num_rows > 0) {\r\n+            while($row = $result->fetch_assoc()) {\r\n+                echo \"<tr>\";\r\n+                echo \"<td>\" . $no++ . \"</td>\";\r\n+                echo \"<td>\" . htmlspecialchars($row['customer_name']) . \"</td>\";\r\n+                echo \"<td>\" . htmlspecialchars($row['delivery_no']) . \"</td>\";\r\n+                echo \"<td>\" . htmlspecialchars($row['item_name']) . \"</td>\";\r\n+                echo \"<td>\" . $row['qty'] . \"</td>\";\r\n+                echo \"<td>\" . number_format($row['price'],2) . \"</td>\";\r\n+                echo \"<td>\" . htmlspecialchars($row['unit']) . \"</td>\";\r\n+                echo \"<td>\" . number_format($row['total'],2) . \"</td>\";\r\n+                echo \"</tr>\";\r\n+            }\r\n+        } else {\r\n+            echo \"<tr><td colspan='8'>ยังไม่มีข้อมูล</td></tr>\";\r\n+        }\r\n+        ?>\r\n     </tbody>\r\n-    <tfoot>\r\n-      <tr>\r\n-        <td colspan=\"7\" style=\"text-align: right;\">รวมทั้งหมด</td>\r\n-        <td id=\"totalSum\">0</td>\r\n-      </tr>\r\n-    </tfoot>\r\n-  </table>\r\n+</table>\r\n \r\n-  <script>\r\n-    // ฟังก์ชันดึงข้อมูลจาก PHP\r\n-    async function loadDeliveries() {\r\n-      try {\r\n-        let res = await fetch(\"http://localhost/shop/list/all_deliveries1.php\");\r\n-        let data = await res.json();\r\n+  <button class=\"btn-pdf\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n+</div>\r\n \r\n-        let tbody = document.querySelector(\"#deliveryTable tbody\");\r\n-        let totalSum = 0;\r\n+<script>\r\n+// โหลดข้อมูลจาก PHP\r\n+async function loadData() {\r\n+  let res = await fetch(\"http://localhost/shop/list/all_deliveries1.php\");\r\n+  let data = await res.json();\r\n+  let tbody = document.querySelector(\"#deliveryTable tbody\");\r\n+  tbody.innerHTML = \"\";\r\n \r\n-        if (!data || data.length === 0) {\r\n-          tbody.innerHTML = `<tr><td colspan=\"8\">ไม่มีข้อมูล</td></tr>`;\r\n-          document.getElementById(\"totalSum\").textContent = \"0\";\r\n-          return;\r\n-        }\r\n+  if (data.length === 0) {\r\n+    tbody.innerHTML = \"<tr><td colspan='8'>ไม่มีข้อมูล</td></tr>\";\r\n+    return;\r\n+  }\r\n \r\n-        tbody.innerHTML = \"\";\r\n-        data.forEach((item, index) => {\r\n-          let sum = parseFloat(item.qty) * parseFloat(item.price);\r\n-          totalSum += sum;\r\n-          tbody.innerHTML += `\r\n-            <tr>\r\n-              <td>${index + 1}</td>\r\n-              <td>${item.delivery_no || '-'}</td>\r\n-              <td>${item.delivery_date || '-'}</td>\r\n-              <td>${item.customer_name || '-'}</td>\r\n-              <td>${item.item_name || '-'}</td>\r\n-              <td>${item.qty || 0}</td>\r\n-              <td>${Number(item.price).toLocaleString()}</td>\r\n-              <td>${sum.toLocaleString()}</td>\r\n-            </tr>\r\n-          `;\r\n-        });\r\n+  data.forEach((row, idx) => {\r\n+    let tr = document.createElement(\"tr\");\r\n+    tr.innerHTML = `\r\n+      <td>${idx+1}</td>\r\n+      <td>${row.customer_name}</td>\r\n+      <td>${row.delivery_no}</td>\r\n+      <td>${row.item_name}</td>\r\n+      <td>${row.qty}</td>\r\n+      <td>${parseFloat(row.price).toFixed(2)}</td>\r\n+      <td>${row.unit}</td>\r\n+      <td>${parseFloat(row.total).toFixed(2)}</td>\r\n+    `;\r\n+    tbody.appendChild(tr);\r\n+  });\r\n+}\r\n \r\n-        document.getElementById(\"totalSum\").textContent = totalSum.toLocaleString();\r\n+// ค้นหา\r\n+document.getElementById(\"searchInput\").addEventListener(\"keyup\", function(){\r\n+  let input = this.value.toLowerCase();\r\n+  let column = document.getElementById(\"searchColumn\").value;\r\n+  let rows = document.querySelectorAll(\"#deliveryTable tbody tr\");\r\n \r\n-      } catch (err) {\r\n-        console.error(\"โหลดข้อมูลผิดพลาด:\", err);\r\n-        document.querySelector(\"#deliveryTable tbody\").innerHTML =\r\n-          `<tr><td colspan=\"8\">เกิดข้อผิดพลาดในการโหลดข้อมูล</td></tr>`;\r\n-      }\r\n-    }\r\n+  rows.forEach(r=>{\r\n+    let cellText = r.querySelector(\"td:nth-child(\" + (column===\"customer_name\"?2: column===\"delivery_no\"?3:4) + \")\").innerText.toLowerCase();\r\n+    r.style.display = cellText.includes(input) ? \"\" : \"none\";\r\n+  });\r\n+});\r\n \r\n-    // ฟังก์ชันค้นหา\r\n-    document.getElementById(\"searchInput\").addEventListener(\"keyup\", function() {\r\n-      let filter = this.value.toLowerCase();\r\n-      let rows = document.querySelectorAll(\"#deliveryTable tbody tr\");\r\n-      rows.forEach(row => {\r\n-        row.style.display = row.innerText.toLowerCase().includes(filter) ? \"\" : \"none\";\r\n-      });\r\n-    });\r\n-\r\n-    // โหลดข้อมูลทันทีเมื่อเปิดหน้า\r\n-    loadDeliveries();\r\n-\r\n-\r\n // พิมพ์ PDF\r\n function printPDF(){\r\n   window.print();\r\n }\r\n"
                },
                {
                    "date": 1758548587673,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,50 +46,30 @@\n \r\n   <div class=\"search-box\">\r\n     <label for=\"searchColumn\">ค้นหาโดย: </label>\r\n     <select id=\"searchColumn\">\r\n-        <option value=\"1\">ชื่อลูกค้า</option>\r\n-        <option value=\"2\">เลขที่ / NO.</option>\r\n-        <option value=\"3\">รายการสินค้า</option>\r\n+      <option value=\"customer_name\">ชื่อลูกค้า</option>\r\n+      <option value=\"delivery_no\">เลขที่ / NO.</option>\r\n+      <option value=\"item_name\">สินค้า</option>\r\n     </select>\r\n     <input type=\"text\" id=\"searchInput\" placeholder=\"พิมพ์คำค้นหา...\">\r\n-</div>\r\n+  </div>\r\n \r\n-<table id=\"deliveryTable\">\r\n+  <table id=\"deliveryTable\">\r\n     <thead>\r\n-        <tr>\r\n-            <th>ลำดับ</th>\r\n-            <th>ชื่อลูกค้า</th>\r\n-            <th>เลขที่ / NO.</th>\r\n-            <th>รายการ</th>\r\n-            <th>จำนวน</th>\r\n-            <th>ราคา</th>\r\n-            <th>หน่วย</th>\r\n-            <th>ราคารวม</th>\r\n-        </tr>\r\n+      <tr>\r\n+        <th>ลำดับ</th>\r\n+        <th>ชื่อลูกค้า</th>\r\n+        <th>เลขที่ / NO.</th>\r\n+        <th>สินค้า</th>\r\n+        <th>จำนวน</th>\r\n+        <th>ราคา</th>\r\n+        <th>หน่วย</th>\r\n+        <th>ราคารวม</th>\r\n+      </tr>\r\n     </thead>\r\n-    <tbody>\r\n-        <?php\r\n-        $no = 1;\r\n-        if ($result->num_rows > 0) {\r\n-            while($row = $result->fetch_assoc()) {\r\n-                echo \"<tr>\";\r\n-                echo \"<td>\" . $no++ . \"</td>\";\r\n-                echo \"<td>\" . htmlspecialchars($row['customer_name']) . \"</td>\";\r\n-                echo \"<td>\" . htmlspecialchars($row['delivery_no']) . \"</td>\";\r\n-                echo \"<td>\" . htmlspecialchars($row['item_name']) . \"</td>\";\r\n-                echo \"<td>\" . $row['qty'] . \"</td>\";\r\n-                echo \"<td>\" . number_format($row['price'],2) . \"</td>\";\r\n-                echo \"<td>\" . htmlspecialchars($row['unit']) . \"</td>\";\r\n-                echo \"<td>\" . number_format($row['total'],2) . \"</td>\";\r\n-                echo \"</tr>\";\r\n-            }\r\n-        } else {\r\n-            echo \"<tr><td colspan='8'>ยังไม่มีข้อมูล</td></tr>\";\r\n-        }\r\n-        ?>\r\n-    </tbody>\r\n-</table>\r\n+    <tbody></tbody>\r\n+  </table>\r\n \r\n   <button class=\"btn-pdf\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n </div>\r\n \r\n"
                },
                {
                    "date": 1758548811029,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,36 +73,45 @@\n   <button class=\"btn-pdf\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n </div>\r\n \r\n <script>\r\n-// โหลดข้อมูลจาก PHP\r\n-async function loadData() {\r\n-  let res = await fetch(\"http://localhost/shop/list/all_deliveries1.php\");\r\n-  let data = await res.json();\r\n-  let tbody = document.querySelector(\"#deliveryTable tbody\");\r\n-  tbody.innerHTML = \"\";\r\n+    async function loadDeliveries() {\r\n+      try {\r\n+        let res = await fetch(\"http://localhost/shop/list/all_deliveries1.php\", {\r\n+          headers: { \"X-Requested-With\": \"fetch\" } // บังคับให้ PHP ส่ง JSON\r\n+        });\r\n+        let data = await res.json();\r\n \r\n-  if (data.length === 0) {\r\n-    tbody.innerHTML = \"<tr><td colspan='8'>ไม่มีข้อมูล</td></tr>\";\r\n-    return;\r\n-  }\r\n+        let tbody = document.querySelector(\"#deliveryTable tbody\");\r\n+        tbody.innerHTML = \"\";\r\n \r\n-  data.forEach((row, idx) => {\r\n-    let tr = document.createElement(\"tr\");\r\n-    tr.innerHTML = `\r\n-      <td>${idx+1}</td>\r\n-      <td>${row.customer_name}</td>\r\n-      <td>${row.delivery_no}</td>\r\n-      <td>${row.item_name}</td>\r\n-      <td>${row.qty}</td>\r\n-      <td>${parseFloat(row.price).toFixed(2)}</td>\r\n-      <td>${row.unit}</td>\r\n-      <td>${parseFloat(row.total).toFixed(2)}</td>\r\n-    `;\r\n-    tbody.appendChild(tr);\r\n-  });\r\n-}\r\n+        if (data.length === 0) {\r\n+          document.getElementById(\"noData\").style.display = \"block\";\r\n+          return;\r\n+        }\r\n \r\n+        data.forEach((row, idx) => {\r\n+          let tr = document.createElement(\"tr\");\r\n+          tr.innerHTML = `\r\n+            <td>${idx+1}</td>\r\n+            <td>${row.customer_name}</td>\r\n+            <td>${row.delivery_no}</td>\r\n+            <td>${row.item_name}</td>\r\n+            <td>${row.qty}</td>\r\n+            <td>${parseFloat(row.price).toFixed(2)}</td>\r\n+            <td>${row.unit}</td>\r\n+            <td>${parseFloat(row.total).toFixed(2)}</td>\r\n+          `;\r\n+          tbody.appendChild(tr);\r\n+        });\r\n+      } catch (err) {\r\n+        console.error(\"Error:\", err);\r\n+        document.getElementById(\"noData\").style.display = \"block\";\r\n+      }\r\n+    }\r\n+\r\n+    loadDeliveries();\r\n+\r\n // ค้นหา\r\n document.getElementById(\"searchInput\").addEventListener(\"keyup\", function(){\r\n   let input = this.value.toLowerCase();\r\n   let column = document.getElementById(\"searchColumn\").value;\r\n"
                },
                {
                    "date": 1758548831369,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,45 +73,36 @@\n   <button class=\"btn-pdf\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n </div>\r\n \r\n <script>\r\n-    async function loadDeliveries() {\r\n-      try {\r\n-        let res = await fetch(\"http://localhost/shop/list/all_deliveries1.php\", {\r\n-          headers: { \"X-Requested-With\": \"fetch\" } // บังคับให้ PHP ส่ง JSON\r\n-        });\r\n-        let data = await res.json();\r\n+// โหลดข้อมูลจาก PHP\r\n+async function loadData() {\r\n+  let res = await fetch(\"http://localhost/shop/list/all_deliveries1.php\");\r\n+  let data = await res.json();\r\n+  let tbody = document.querySelector(\"#deliveryTable tbody\");\r\n+  tbody.innerHTML = \"\";\r\n \r\n-        let tbody = document.querySelector(\"#deliveryTable tbody\");\r\n-        tbody.innerHTML = \"\";\r\n+  if (data.length === 0) {\r\n+    tbody.innerHTML = \"<tr><td colspan='8'>ไม่มีข้อมูล</td></tr>\";\r\n+    return;\r\n+  }\r\n \r\n-        if (data.length === 0) {\r\n-          document.getElementById(\"noData\").style.display = \"block\";\r\n-          return;\r\n-        }\r\n+  data.forEach((row, idx) => {\r\n+    let tr = document.createElement(\"tr\");\r\n+    tr.innerHTML = `\r\n+      <td>${idx+1}</td>\r\n+      <td>${row.customer_name}</td>\r\n+      <td>${row.delivery_no}</td>\r\n+      <td>${row.item_name}</td>\r\n+      <td>${row.qty}</td>\r\n+      <td>${parseFloat(row.price).toFixed(2)}</td>\r\n+      <td>${row.unit}</td>\r\n+      <td>${parseFloat(row.total).toFixed(2)}</td>\r\n+    `;\r\n+    tbody.appendChild(tr);\r\n+  });\r\n+}\r\n \r\n-        data.forEach((row, idx) => {\r\n-          let tr = document.createElement(\"tr\");\r\n-          tr.innerHTML = `\r\n-            <td>${idx+1}</td>\r\n-            <td>${row.customer_name}</td>\r\n-            <td>${row.delivery_no}</td>\r\n-            <td>${row.item_name}</td>\r\n-            <td>${row.qty}</td>\r\n-            <td>${parseFloat(row.price).toFixed(2)}</td>\r\n-            <td>${row.unit}</td>\r\n-            <td>${parseFloat(row.total).toFixed(2)}</td>\r\n-          `;\r\n-          tbody.appendChild(tr);\r\n-        });\r\n-      } catch (err) {\r\n-        console.error(\"Error:\", err);\r\n-        document.getElementById(\"noData\").style.display = \"block\";\r\n-      }\r\n-    }\r\n-\r\n-    loadDeliveries();\r\n-\r\n // ค้นหา\r\n document.getElementById(\"searchInput\").addEventListener(\"keyup\", function(){\r\n   let input = this.value.toLowerCase();\r\n   let column = document.getElementById(\"searchColumn\").value;\r\n"
                },
                {
                    "date": 1758548882174,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -75,32 +75,40 @@\n \r\n <script>\r\n // โหลดข้อมูลจาก PHP\r\n async function loadData() {\r\n-  let res = await fetch(\"http://localhost/shop/list/all_deliveries1.php\");\r\n-  let data = await res.json();\r\n-  let tbody = document.querySelector(\"#deliveryTable tbody\");\r\n-  tbody.innerHTML = \"\";\r\n+  try {\r\n+    let res = await fetch(\"http://localhost/shop/list/all_deliveries1.php\", {\r\n+      headers: { \"X-Requested-With\": \"fetch\" } // บังคับให้ PHP ส่ง JSON\r\n+    });\r\n+    let data = await res.json();\r\n+    let tbody = document.querySelector(\"#deliveryTable tbody\");\r\n+    tbody.innerHTML = \"\";\r\n \r\n-  if (data.length === 0) {\r\n-    tbody.innerHTML = \"<tr><td colspan='8'>ไม่มีข้อมูล</td></tr>\";\r\n-    return;\r\n+    if (!data || data.length === 0) {\r\n+      tbody.innerHTML = \"<tr><td colspan='8'>ไม่มีข้อมูล</td></tr>\";\r\n+      return;\r\n+    }\r\n+\r\n+    data.forEach((row, idx) => {\r\n+      let tr = document.createElement(\"tr\");\r\n+      tr.innerHTML = `\r\n+        <td>${idx+1}</td>\r\n+        <td>${row.customer_name}</td>\r\n+        <td>${row.delivery_no}</td>\r\n+        <td>${row.item_name}</td>\r\n+        <td>${row.qty}</td>\r\n+        <td>${parseFloat(row.price).toFixed(2)}</td>\r\n+        <td>${row.unit}</td>\r\n+        <td>${parseFloat(row.total).toFixed(2)}</td>\r\n+      `;\r\n+      tbody.appendChild(tr);\r\n+    });\r\n+  } catch (err) {\r\n+    console.error(\"โหลดข้อมูลล้มเหลว:\", err);\r\n+    document.querySelector(\"#deliveryTable tbody\").innerHTML =\r\n+      \"<tr><td colspan='8'>ไม่มีข้อมูล</td></tr>\";\r\n   }\r\n-\r\n-  data.forEach((row, idx) => {\r\n-    let tr = document.createElement(\"tr\");\r\n-    tr.innerHTML = `\r\n-      <td>${idx+1}</td>\r\n-      <td>${row.customer_name}</td>\r\n-      <td>${row.delivery_no}</td>\r\n-      <td>${row.item_name}</td>\r\n-      <td>${row.qty}</td>\r\n-      <td>${parseFloat(row.price).toFixed(2)}</td>\r\n-      <td>${row.unit}</td>\r\n-      <td>${parseFloat(row.total).toFixed(2)}</td>\r\n-    `;\r\n-    tbody.appendChild(tr);\r\n-  });\r\n }\r\n \r\n // ค้นหา\r\n document.getElementById(\"searchInput\").addEventListener(\"keyup\", function(){\r\n@@ -108,9 +116,11 @@\n   let column = document.getElementById(\"searchColumn\").value;\r\n   let rows = document.querySelectorAll(\"#deliveryTable tbody tr\");\r\n \r\n   rows.forEach(r=>{\r\n-    let cellText = r.querySelector(\"td:nth-child(\" + (column===\"customer_name\"?2: column===\"delivery_no\"?3:4) + \")\").innerText.toLowerCase();\r\n+    let colIndex = (column===\"customer_name\"?2: column===\"delivery_no\"?3:4);\r\n+    let cell = r.querySelector(\"td:nth-child(\" + colIndex + \")\");\r\n+    let cellText = cell ? cell.innerText.toLowerCase() : \"\";\r\n     r.style.display = cellText.includes(input) ? \"\" : \"none\";\r\n   });\r\n });\r\n \r\n"
                },
                {
                    "date": 1758549147958,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,30 +4,20 @@\n   <meta charset=\"UTF-8\">\r\n   <title>ใบส่งของ</title>\r\n   <style>\r\n     body { margin:0; font-family: Tahoma, sans-serif; background:#f9f9ef; }\r\n-    .sidebar {\r\n-      width: 220px; height:100vh; background:#b89172; float:left; color:#fff;\r\n-      display:flex; flex-direction:column; align-items:center; padding-top:30px;\r\n-    }\r\n-    .sidebar a {\r\n-      color:#fff; text-decoration:none; margin:15px 0; display:block; width:100%; text-align:center;\r\n-    }\r\n+    .sidebar { width:220px; height:100vh; background:#b89172; float:left; color:#fff; display:flex; flex-direction:column; align-items:center; padding-top:30px; }\r\n+    .sidebar a { color:#fff; text-decoration:none; margin:15px 0; display:block; width:100%; text-align:center; }\r\n     .content { margin-left:220px; padding:20px; }\r\n-    .topbar {\r\n-      background:#d4b295; padding:10px; text-align:center;\r\n-    }\r\n+    .topbar { background:#d4b295; padding:10px; text-align:center; }\r\n     h2 { margin:20px 0; }\r\n     table { width:100%; border-collapse:collapse; }\r\n     th, td { border:1px solid #ccc; padding:8px; text-align:center; }\r\n     th { background:#e5c3a6; }\r\n     tr:nth-child(even){background:#fdf5ef;}\r\n     .search-box { margin:10px 0; }\r\n     input, select { padding:6px; }\r\n-    .btn-pdf {\r\n-      margin-top:20px; background:#f77c7c; color:#000; padding:10px 20px;\r\n-      border:none; border-radius:6px; cursor:pointer; font-weight:bold;\r\n-    }\r\n+    .btn-pdf { margin-top:20px; background:#f77c7c; color:#000; padding:10px 20px; border:none; border-radius:6px; cursor:pointer; font-weight:bold; }\r\n   </style>\r\n </head>\r\n <body>\r\n \r\n@@ -69,29 +59,28 @@\n     </thead>\r\n     <tbody></tbody>\r\n   </table>\r\n \r\n-  <button class=\"btn-pdf\" onclick=\"printPDF()\">พิมพ์ PDF</button>\r\n+  <button class=\"btn-pdf\" onclick=\"window.print()\">พิมพ์ PDF</button>\r\n </div>\r\n \r\n <script>\r\n-// โหลดข้อมูลจาก PHP\r\n async function loadData() {\r\n   try {\r\n-    let res = await fetch(\"http://localhost/shop/list/all_deliveries1.php\", {\r\n-      headers: { \"X-Requested-With\": \"fetch\" } // บังคับให้ PHP ส่ง JSON\r\n+    const res = await fetch(\"list/all_deliveries1.php\", {\r\n+      headers: { \"X-Requested-With\": \"XMLHttpRequest\" }\r\n     });\r\n-    let data = await res.json();\r\n-    let tbody = document.querySelector(\"#deliveryTable tbody\");\r\n+    const data = await res.json();\r\n+    const tbody = document.querySelector(\"#deliveryTable tbody\");\r\n     tbody.innerHTML = \"\";\r\n \r\n-    if (!data || data.length === 0) {\r\n+    if(!data || data.length===0) {\r\n       tbody.innerHTML = \"<tr><td colspan='8'>ไม่มีข้อมูล</td></tr>\";\r\n       return;\r\n     }\r\n \r\n-    data.forEach((row, idx) => {\r\n-      let tr = document.createElement(\"tr\");\r\n+    data.forEach((row, idx)=>{\r\n+      const tr = document.createElement(\"tr\");\r\n       tr.innerHTML = `\r\n         <td>${idx+1}</td>\r\n         <td>${row.customer_name}</td>\r\n         <td>${row.delivery_no}</td>\r\n@@ -102,34 +91,28 @@\n         <td>${parseFloat(row.total).toFixed(2)}</td>\r\n       `;\r\n       tbody.appendChild(tr);\r\n     });\r\n-  } catch (err) {\r\n+  } catch(err) {\r\n     console.error(\"โหลดข้อมูลล้มเหลว:\", err);\r\n-    document.querySelector(\"#deliveryTable tbody\").innerHTML =\r\n-      \"<tr><td colspan='8'>ไม่มีข้อมูล</td></tr>\";\r\n+    document.querySelector(\"#deliveryTable tbody\").innerHTML = \"<tr><td colspan='8'>ไม่มีข้อมูล</td></tr>\";\r\n   }\r\n }\r\n \r\n-// ค้นหา\r\n+// Search\r\n document.getElementById(\"searchInput\").addEventListener(\"keyup\", function(){\r\n-  let input = this.value.toLowerCase();\r\n-  let column = document.getElementById(\"searchColumn\").value;\r\n-  let rows = document.querySelectorAll(\"#deliveryTable tbody tr\");\r\n+  const input = this.value.toLowerCase();\r\n+  const column = document.getElementById(\"searchColumn\").value;\r\n+  const rows = document.querySelectorAll(\"#deliveryTable tbody tr\");\r\n \r\n   rows.forEach(r=>{\r\n-    let colIndex = (column===\"customer_name\"?2: column===\"delivery_no\"?3:4);\r\n-    let cell = r.querySelector(\"td:nth-child(\" + colIndex + \")\");\r\n-    let cellText = cell ? cell.innerText.toLowerCase() : \"\";\r\n+    let colIndex = column===\"customer_name\"?2: column===\"delivery_no\"?3:4;\r\n+    const cell = r.querySelector(\"td:nth-child(\"+colIndex+\")\");\r\n+    const cellText = cell ? cell.innerText.toLowerCase() : \"\";\r\n     r.style.display = cellText.includes(input) ? \"\" : \"none\";\r\n   });\r\n });\r\n \r\n-// พิมพ์ PDF\r\n-function printPDF(){\r\n-  window.print();\r\n-}\r\n-\r\n loadData();\r\n </script>\r\n \r\n </body>\r\n"
                }
            ],
            "date": 1758466424574,
            "name": "Commit-0",
            "content": "1"
        }
    ]
}